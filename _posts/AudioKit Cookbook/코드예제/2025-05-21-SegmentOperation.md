---
title: AudioKitì˜ SegmentOperation
author: ayaysir
date: 2025-05-21 15:36:12 +0900
categories: [StudyLog, AudioKit]
tags: [AudioKit, á„‹á…³á†·á„’á…£á†¼á„‹á…µá„…á…©á†«]
---

# Segment Operation

ì´ ì½”ë“œëŠ” `AudioKit`, `SporthAudioKit`ì„ ê¸°ë°˜ìœ¼ë¡œ ìŒí–¥ í•©ì„±ì„ ìˆ˜í–‰í•˜ëŠ” Swift í´ë˜ìŠ¤ `SegmentOperationConductor`ì…ë‹ˆë‹¤. íŠ¹íˆ \*\*ë¼ì¸ ì„¸ê·¸ë¨¼íŠ¸(line segment)\*\*ì™€ \*\*ì§€ìˆ˜ ì„¸ê·¸ë¨¼íŠ¸(exponential segment)\*\*ë¥¼ í™œìš©í•œ **ì‹œê°„ ë³€í™” ê¸°ë°˜ì˜ ìŒí–¥ í•©ì„±**ì„ êµ¬í˜„í•œ ì˜ˆì œì…ë‹ˆë‹¤.

---

## ğŸ’¡ ì „ì²´ ê°œìš”

`SegmentOperationConductor`ëŠ” **ì‹œê°„ì— ë”°ë¼ ë³€í™”í•˜ëŠ” ì£¼íŒŒìˆ˜ì™€ ì§„í­**ì„ ê°€ì§€ëŠ” ì‚¬ì¸íŒŒë¥¼ ìƒì„±í•˜ê³ , **ë”œë ˆì´ì™€ ë¦¬ë²„ë¸Œ ì´í™íŠ¸**ë¥¼ ì ìš©í•œ ì‚¬ìš´ë“œë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.

---

## ğŸ”§ ì£¼ìš” êµ¬ì„± ìš”ì†Œ ì„¤ëª…

```swift
let generator = OperationGenerator { params in
```

`OperationGenerator`ëŠ” ì˜¤ë””ì˜¤ ì‹ í˜¸ ê·¸ë˜í”„ë¥¼ ìƒì„±í•˜ëŠ” í•µì‹¬ì´ë©°, Sporth DSLì„ Swift ë¬¸ë²•ìœ¼ë¡œ ë§Œë“  êµ¬ì¡°ì…ë‹ˆë‹¤. `params`ëŠ” ì™¸ë¶€ì—ì„œ ì œì–´ ê°€ëŠ¥í•œ íŒŒë¼ë¯¸í„°ë¥¼ ì „ë‹¬ë°›ìŠµë‹ˆë‹¤.

### ğŸš params\[0] = updateRate

```swift
let updateRate = params[0]
```

* ì´ ê°’ì€ **`metronome` íŠ¸ë¦¬ê±°ì˜ ë¹ˆë„**ë¥¼ ì¡°ì ˆí•©ë‹ˆë‹¤.
* ì´ íŠ¸ë¦¬ê±°ëŠ” íŠ¹ì • ì‹œê°„ ê°„ê²©ë§ˆë‹¤ ì•„ë˜ ë¼ì¸ ì„¸ê·¸ë¨¼íŠ¸, ì§€ìˆ˜ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ \*\*ì¬ì‹œì‘(íŠ¸ë¦¬ê±°)\*\*í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.

---

## ğŸŒ€ ë¼ì¸ ì„¸ê·¸ë¨¼íŠ¸ (`lineSegment`)

```swift
let start = Operation.randomNumberPulse() * 2000 + 300
let duration = Operation.randomNumberPulse()
let frequency = Operation.lineSegment(
  trigger: Operation.metronome(frequency: updateRate),
  start: start,
  end: 0,
  duration: duration
)
```

### Operation.randomNumberPulse()
* 0.0ë¶€í„° 1.0 ì‚¬ì´ì˜ ë‚œìˆ˜(random number) ë¥¼ ì¼ì • ì£¼ê¸°ë§ˆë‹¤ ì¶œë ¥í•©ë‹ˆë‹¤.
* ê¸°ë³¸ì ìœ¼ë¡œ ì´ˆë‹¹ 10ë²ˆ (10Hz) ê°±ì‹ ë˜ë©°, ì„¤ì •í•˜ì§€ ì•Šìœ¼ë©´ defaultì…ë‹ˆë‹¤.
* ìƒ˜í”Œ í™€ë“œí˜• ë…¸ì´ì¦ˆì™€ ë¹„ìŠ·í•˜ê²Œ ì¼ì • ì£¼ê¸°ë§ˆë‹¤ ê°’ì´ ë°”ë€ë‹ˆë‹¤.

### âœ” `Operation.lineSegment(...)`ì˜ ëœ»

* **"ì„ í˜• êµ¬ê°„(line segment)"**: ì„ í˜•ì ìœ¼ë¡œ ê°’ì´ ë³€í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
  â†’ ë§ˆì¹˜ ê·¸ë˜í”„ì—ì„œ ì§ì„ ìœ¼ë¡œ ì´ì–´ì§„ êµ¬ê°„ì²˜ëŸ¼ **ì‹œì‘ ê°’ì—ì„œ ë ê°’ê¹Œì§€ ì¼ì • ì‹œê°„ì— ê±¸ì³ ì„ í˜•ìœ¼ë¡œ ë³€í™”**í•©ë‹ˆë‹¤.

### ì´ ì½”ë“œì—ì„œëŠ”?

* ëœë¤í•œ ì£¼íŒŒìˆ˜(`start`)ì—ì„œ **0Hzê¹Œì§€ ì²œì²œíˆ ë‚´ë ¤ê°**
* ì´ ê³¼ì •ì€ `duration` (ì§€ì†ì‹œê°„)ì— ë”°ë¼ ë³€í™”
* `metronome`ì´ íŠ¸ë¦¬ê±°ë˜ì–´ ì£¼ê¸°ì ìœ¼ë¡œ ë°˜ë³µë¨

### ê²°ê³¼

> **ì†Œë¦¬ì˜ í”¼ì¹˜ê°€ ë§¤ë²ˆ ë‹¤ë¥´ê²Œ ì‹œì‘í•´ì„œ ì„œì„œíˆ ë‚´ë ¤ê°€ê³  ëŠì–´ì§.**

---

## ğŸ“‰ ì§€ìˆ˜ ì„¸ê·¸ë¨¼íŠ¸ (`exponentialSegment`)

```swift
let amplitude = Operation.exponentialSegment(
  trigger: Operation.metronome(frequency: updateRate),
  start: 0.3,
  end: 0.01,
  duration: 1.0
)
```

* **"ì§€ìˆ˜ êµ¬ê°„(exponential segment)"**: ì‹œì‘ê°’ì—ì„œ ëê°’ìœ¼ë¡œ **ì§€ìˆ˜ì ìœ¼ë¡œ ê°ì†Œ**í•©ë‹ˆë‹¤.
* ì´ ê²½ìš°ì—” ë³¼ë¥¨(ì§„í­)ì´ 0.3ì—ì„œ 0.01ë¡œ **ë§¤ìš° ë¹ ë¥´ê²Œ ì¤„ì–´ë“­ë‹ˆë‹¤.**
* `trigger`ì— ì˜í•´ ì£¼ê¸°ì ìœ¼ë¡œ ì¬ì‹œì‘

---

## ğŸ› ì˜¤ì‹¤ë ˆì´í„° ìƒì„±

```swift
return Operation.sineWave(frequency: frequency, amplitude: amplitude)
```

* ìœ„ì—ì„œ ì •ì˜í•œ **ì‹œê°„ì— ë”°ë¼ ê°ì†Œí•˜ëŠ” ì£¼íŒŒìˆ˜ì™€ ì§„í­**ì„ ê°€ì§„ ì‚¬ì¸íŒŒë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

---

## ğŸ§ íš¨ê³¼ ì¶”ê°€

```swift
let delay = Delay(generator)
delay.time = 0.125
delay.feedback = 0.8
```

* 125msì˜ ë”œë ˆì´ë¥¼ ë„£ê³ , **80% í”¼ë“œë°±**ìœ¼ë¡œ **ì—ì½”ì²˜ëŸ¼ ë°˜ë³µë˜ëŠ” ì†Œë¦¬**ë¥¼ ìƒì„±

```swift
let reverb = Reverb(delay)
reverb.loadFactoryPreset(.largeHall)
```

* ë¦¬ë²„ë¸ŒëŠ” **í° í™€(hall)** í”„ë¦¬ì…‹ì„ ì‚¬ìš©í•´ì„œ ì†Œë¦¬ë¥¼ **ê³µê°„ê° ìˆê³  ìš¸ë¦¬ê²Œ** ë§Œë“­ë‹ˆë‹¤.

```swift
engine.output = reverb
```

* ìµœì¢… ì¶œë ¥ì€ ë¦¬ë²„ë¸Œëœ ì‚¬ìš´ë“œì…ë‹ˆë‹¤.

---

## ğŸ” ì‹¤í–‰ ì œì–´

```swift
@Published var isRunning = false {
  didSet {
    isRunning ? generator.start() : generator.stop()
  }
}
```

* SwiftUIì—ì„œ `isRunning` ê°’ì„ ë°”ê¾¸ë©´ generatorì˜ ì¬ìƒ/ì •ì§€ê°€ ë™ê¸°í™”ë©ë‹ˆë‹¤.

---

## âœ… ìš”ì•½

| ìš”ì†Œ                   | ì—­í•                        |
| -------------------- | ------------------------ |
| `lineSegment`        | ì£¼íŒŒìˆ˜ë¥¼ ì ì°¨ ì¤„ì´ê²Œ í•˜ëŠ” ì„ í˜• êµ¬ê°„ í•¨ìˆ˜  |
| `exponentialSegment` | ì§„í­(ë³¼ë¥¨)ì„ ë¹ ë¥´ê²Œ ì¤„ì´ê²Œ í•˜ëŠ” ì§€ìˆ˜ í•¨ìˆ˜ |
| `metronome`          | ìœ„ ë‘ ì„¸ê·¸ë¨¼íŠ¸ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ íŠ¸ë¦¬ê±°í•¨     |
| `sineWave`           | ì‹¤ì œ ìŒì„ ë°œìƒì‹œí‚´               |
| `Delay`              | ì”í–¥ì²˜ëŸ¼ ì†Œë¦¬ ë°˜ë³µ               |
| `Reverb`             | ê³µê°„ê° ìˆê²Œ ì†Œë¦¬ë¥¼ ìš¸ë¦¼            |

---

## ğŸ§  ë¹„ìœ ë¡œ ì´í•´í•˜ë©´

* **`lineSegment`** = "ì‚°ì—ì„œ ì°ë§¤ íƒ€ê¸°": ë†’ì´ì—ì„œ ì¶œë°œ â†’ ë°‘ìœ¼ë¡œ ì„œì„œíˆ ë‚´ë ¤ì˜´ (Pitch ë‚®ì•„ì§)
* **`exponentialSegment`** = "ë¶ˆ êº¼ì§€ê¸°": ì²˜ìŒì€ ë°ë‹¤ê°€ ì ì  ì–´ë‘ì›Œì§ (ë³¼ë¥¨ ê¸‰ì†íˆ ì¤„ì–´ë“¦)

---
