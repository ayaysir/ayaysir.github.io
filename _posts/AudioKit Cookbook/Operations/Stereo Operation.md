# Stereo Operation

ì´ ì½”ë“œëŠ” **ìŠ¤í…Œë ˆì˜¤ ì˜¤ë””ì˜¤ ì‹ í˜¸ë¥¼ ìƒì„±í•˜ê³ , ì‹¤ì‹œê°„ìœ¼ë¡œ ì¢Œìš° íŒ¨ë‹(pan) ë° ì£¼íŒŒìˆ˜ ë³€ê²½ì´ ê°€ëŠ¥í•œ** AudioKit ê¸°ë°˜ì˜ `StereoOperationConductor` í´ë˜ìŠ¤ì…ë‹ˆë‹¤. ê¸°ì¡´ ì½”ë“œì—ì„œ í™•ì¥ëœ ë¶€ë¶„ê³¼ í•¨ê»˜ ì „ì²´ì ì¸ ë™ì‘ì„ **ìŒí–¥ì  ì˜ë¯¸ì™€ ìˆ˜ì¹˜ ë‹¨ìœ„ê¹Œì§€ í¬í•¨í•˜ì—¬ ì„¤ëª…**ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

---

## ğŸ§± ì „ì²´ êµ¬ì¡°

```swift
class StereoOperationConductor: ObservableObject, HasAudioEngine
```

* `ObservableObject` â†’ SwiftUIì—ì„œ `@StateObject`ë¡œ ìƒíƒœ ì¶”ì  ê°€ëŠ¥.
* `HasAudioEngine` â†’ AudioKitì˜ ì˜¤ë””ì˜¤ ì—”ì§„ì„ ì§ì ‘ ì œì–´.

---

## ğŸ”Š ì£¼ìš” êµ¬ì„±ìš”ì†Œ

### 1. `generator: OperationGenerator`

* **ìŠ¤í…Œë ˆì˜¤ 2ì±„ë„** ì‚¬ìš´ë“œë¥¼ ìƒì„±í•¨.
* íŒŒë¼ë¯¸í„° `params[0]`, `params[1]`ì„ í†µí•´ ì¢Œìš° ì£¼íŒŒìˆ˜ë¥¼ ì™¸ë¶€ì—ì„œ ì‹¤ì‹œê°„ ì¡°ì • ê°€ëŠ¥.

```swift
let generator = OperationGenerator(channelCount: 2) { params in ... }
```

---

### 2. ë¹„ë¸Œë¼í† (Vibrato)ì™€ íŠ¸ë ˆëª°ë¡œ(Tremolo)

#### `slowSine` (ë¹„ë¸Œë¼í† )

```swift
let slowSine = round(Operation.sineWave(frequency: 1) * 12) / 12
let vibrato = slowSine.scale(minimum: -1200, maximum: 1200)
```

* **1Hz ì €ì£¼íŒŒ ì‚¬ì¸íŒŒ**ë¥¼ 12ë‹¨ê³„ë¡œ ì–‘ìí™” â†’ **1ì˜¥íƒ€ë¸Œ(12ì„¸ë¯¸í†¤)** ë‹¨ìœ„ì˜ ìŠ¤í…ìœ¼ë¡œ ë³€í•¨.
* `-1200 ~ +1200 cent` = `-1ì˜¥íƒ€ë¸Œ ~ +1ì˜¥íƒ€ë¸Œ` ë²”ìœ„
* `frequency + vibrato` â†’ ì‚¬ìš´ë“œì˜ í”¼ì¹˜ë¥¼ í”ë“¤ë¦¬ê²Œ ë§Œë“¦ (**ë¹„ë¸Œë¼í†  íš¨ê³¼**)

#### `fastSine` (íŠ¸ë ˆëª°ë¡œ)

```swift
let fastSine = Operation.sineWave(frequency: 10)
let volume = fastSine.scale(minimum: 0, maximum: 0.5)
```

* **10Hz ê³ ì£¼íŒŒ ì‚¬ì¸íŒŒ** â†’ 1ì´ˆì— 10ë²ˆ ë³¼ë¥¨ì´ í”ë“¤ë¦¼.
* `0.0 ~ 0.5` ë²”ìœ„ì˜ **ì§„í­(amplitude)** ë³€í™”ë¥¼ í†µí•´ **íŠ¸ë ˆëª°ë¡œ íš¨ê³¼** (ì†Œë¦¬ì˜ ì„¸ê¸°ê°€ ê·œì¹™ì ìœ¼ë¡œ ë³€í™”)

---

### 3. ì¢Œìš° ì‚¬ìš´ë“œ ìƒì„±

```swift
let leftOutput = Operation.sineWave(
  frequency: params[0] + vibrato,
  amplitude: volume
)
let rightOutput = Operation.sineWave(
  frequency: params[1] + vibrato,
  amplitude: volume
)
```

* `params[0]`: ì¢Œì¸¡ ì‹œì‘ ì£¼íŒŒìˆ˜ (`leftStartFreq`)
* `params[1]`: ìš°ì¸¡ ì‹œì‘ ì£¼íŒŒìˆ˜ (`rightStartFreq`)
* `vibrato`ëŠ” ì–‘ìª½ ëª¨ë‘ì— ë™ì¼í•˜ê²Œ ì ìš©
* ê²°ê³¼ì ìœ¼ë¡œ ì¢Œ/ìš° ì£¼íŒŒìˆ˜ ì°¨ì´ + ì§„í­ ë³€í™” â†’ ê³µê°„ê° ìˆëŠ” ìŠ¤í…Œë ˆì˜¤ ì‚¬ìš´ë“œ ìƒì„±

---

### 4. íŒ¨ë‹(Panner)

```swift
private let panner: Panner
```

* `Panner(generator)`ë¥¼ í†µí•´ ì¢Œ/ìš° ì‚¬ìš´ë“œë¥¼ í•˜ë‚˜ë¡œ ì„ì–´ì„œ ì¶œë ¥í•  ë•Œ **ìœ„ì¹˜ ì¡°ì ˆ ê°€ëŠ¥**.
* `pan` ë²”ìœ„: `-1.0` (ì™„ì „ ì™¼ìª½) \~ `0.0` (ì¤‘ì•™) \~ `+1.0` (ì™„ì „ ì˜¤ë¥¸ìª½)

```swift
@Published var pan: AUValue = 0.0 {
  didSet { panner.pan = pan }
}
```

---

### 5. ì´ˆê¸° íŒŒë¼ë¯¸í„° ì„¤ì •

```swift
generator.parameter1 = leftStartFreq
generator.parameter2 = rightStartFreq
```

* ì•± ì‹¤í–‰ ì‹œ ê¸°ë³¸ ì¢Œ/ìš° ì£¼íŒŒìˆ˜ë¥¼ ì§€ì • (440Hz, 220Hz)

---

## ğŸ§  ìˆ˜ì¹˜ì  ì˜ë¯¸ ìš”ì•½

| ìš”ì†Œ          | ìˆ˜ì¹˜ ë²”ìœ„            | ë‹¨ìœ„/ì—­í•          |
| ----------- | ---------------- | ------------- |
| `slowSine`  | Â±1 ì˜¥íƒ€ë¸Œ (`Â±1200`) | ì„¼íŠ¸ (pitch)    |
| `fastSine`  | 0.0 \~ 0.5       | ì§„í­ (volume)   |
| `leftFreq`  | 440 (A4)         | Hz (ì¢Œ ì±„ë„ ì‹œì‘ìŒ) |
| `rightFreq` | 220 (A3)         | Hz (ìš° ì±„ë„ ì‹œì‘ìŒ) |
| `pan`       | -1.0 \~ 1.0      | ì¢Œ/ìš° ê³µê°„ ìœ„ì¹˜     |

---

## âœ… ìš”ì•½

* ì¢Œ/ìš° ì±„ë„ì˜ ì£¼íŒŒìˆ˜ë¥¼ ë”°ë¡œ ì¡°ì ˆ ê°€ëŠ¥
* ë¹„ë¸Œë¼í† , íŠ¸ë ˆëª°ë¡œê°€ ê° ì±„ë„ì— ë™ì¼í•˜ê²Œ ì ìš©ë˜ì–´ ë¦¬ë“¬ê° ìˆê³  ê³µê°„ê° ìˆëŠ” ì‚¬ìš´ë“œë¥¼ ë§Œë“¦
* `Panner`ë¡œ ì „ì²´ ì‚¬ìš´ë“œì˜ ì¢Œìš° ìœ„ì¹˜ ì¡°ì ˆ ê°€ëŠ¥
* **AudioKitì„ í™œìš©í•œ ì¸í„°ë™í‹°ë¸Œ ìŠ¤í…Œë ˆì˜¤ ì‚¬ìš´ë“œ ë””ìì¸ êµ¬ì¡°**ë¡œ, ì‚¬ìš´ë“œ ì‹¤í—˜, ì„¤ì¹˜ìŒì•…, ì‹¤ì‹œê°„ ì œì–´ì— ìœ ìš©í•¨

---
