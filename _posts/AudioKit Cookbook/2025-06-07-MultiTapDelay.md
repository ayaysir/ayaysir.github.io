---
title: AudioKitì˜ MultiTapDelay
author: ayaysir
date: 2025-06-07 14:53:20 +0900
categories: [StudyLog, AudioKit]
tags: [AudioKit, á„‹á…³á†·á„’á…£á†¼á„‹á…µá„…á…©á†«]
---

# Multi Tap Delay

- [ì½”ë“œ ë³´ê¸°](https://github.com/ayaysir/Swift-Playgrounds/blob/main/AudioKit%20Cookbook%20Copy/AudioKit%20Cookbook%20Copy/Recipe/Effects/MultiTapDelay.swift)

`MultiTapDelayConductor` í´ë˜ìŠ¤ëŠ” AudioKitì„ ì‚¬ìš©í•˜ì—¬ **ë©€í‹°íƒ­ ë”œë ˆì´(Multi-Tap Delay)** íš¨ê³¼ë¥¼ êµ¬í˜„í•˜ëŠ” Swift í´ë˜ìŠ¤ì…ë‹ˆë‹¤. ì—¬ëŸ¬ ê°œì˜ ì§€ì—°ëœ ë³µì‚¬ë³¸ì„ ì…ë ¥ ì‹ í˜¸ì— ì„ì–´ ë¦¬ë“¬ê° ìˆëŠ” ë°˜ë³µ íš¨ê³¼ë‚˜ ë¦¬ë²„ë¸Œì™€ ìœ ì‚¬í•œ í’ë¶€í•œ ê³µê°„ê°ì„ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤.

---

## ğŸ“Œ í´ë˜ìŠ¤ ì„¤ëª…

### `class MultiTapDelayConductor: ObservableObject, ProcessesPlayerInput`

* **`ObservableObject`**: SwiftUI ë·°ì™€ ë°ì´í„°ë¥¼ ë°”ì¸ë”©í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ìŠ¬ë¼ì´ë”ë¥¼ í†µí•´ ë”œë ˆì´ ì‹œê°„ ë° ê²Œì¸ ê°’ì´ ë°”ë€Œë©´ ë·°ê°€ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.
* **`ProcessesPlayerInput`**: ì˜¤ë””ì˜¤ ì¬ìƒ ì²˜ë¦¬ë¥¼ ë‹´ë‹¹í•˜ëŠ” AudioKit Cookbookì˜ í”„ë¡œí† ì½œì…ë‹ˆë‹¤.

---

## ğŸ”§ ì£¼ìš” ë³€ìˆ˜

| ë³€ìˆ˜ ì´ë¦„           | ì„¤ëª…                                        |
| --------------- | ----------------------------------------- |
| `engine`        | AudioKitì˜ ì˜¤ë””ì˜¤ ì—”ì§„                          |
| `player`        | `AudioPlayer`: ì˜¤ë””ì˜¤ íŒŒì¼ì„ ë°˜ë³µ ì¬ìƒí•©ë‹ˆë‹¤.          |
| `buffer`        | ì˜¤ë””ì˜¤ íŒŒì¼ì„ ë©”ëª¨ë¦¬ì— ë¡œë“œí•œ ë²„í¼. ìŒì› ë°ì´í„° ì €ì¥            |
| `defaultSource` | ì´ˆê¸° ì¬ìƒí•  ì˜¤ë””ì˜¤ íŒŒì¼. ì—¬ê¸°ì„œëŠ” `.femaleVoice`        |
| `delays`        | `VariableDelay` ë°°ì—´. ê° íƒ­ì˜ ì§€ì—° ìš”ì†Œì…ë‹ˆë‹¤.        |
| `faders`        | `Fader` ë°°ì—´. ê° íƒ­ì˜ ê²Œì¸ ì¡°ì ˆê¸°ì…ë‹ˆë‹¤.               |
| `times`         | ìŠ¬ë¼ì´ë”ë¡œ ì¡°ì ˆí•  ê° íƒ­ì˜ ë”œë ˆì´ ì‹œê°„ (\[0.1, 0.2, 0.4]ì´ˆ) |
| `gains`         | ê° íƒ­ì˜ ì¶œë ¥ ìŒëŸ‰ (\[0.5, 2.0, 0.5])             |

---

## ğŸ›ï¸ init()

* `player.buffer`ì— ì˜¤ë””ì˜¤ ë°ì´í„°ë¥¼ ì„¸íŒ…í•˜ê³  ë°˜ë³µ ì¬ìƒì„ ì„¤ì •í•©ë‹ˆë‹¤.
* `engine.output`ì— `multiTapDelay(player, times: times, gains: gains)`ì„ ì„¤ì •í•˜ì—¬ ì—”ì§„ ì¶œë ¥ì— ë©€í‹°íƒ­ ë”œë ˆì´ íš¨ê³¼ë¥¼ ì ìš©í•©ë‹ˆë‹¤.

---

## ğŸ§© `multiTapDelay(_ input: Node, times: [AUValue], gains: [AUValue]) -> Mixer`

* \*\*ì…ë ¥ ë…¸ë“œ(input)\*\*ì˜ ì‹ í˜¸ë¥¼ ë”œë ˆì´ + ê²Œì¸ ì¡°ì ˆí•´ì„œ ë¯¹ì„œì— ì¶”ê°€í•©ë‹ˆë‹¤.
* ë”œë ˆì´ì™€ ê²Œì¸ì€ ìŠ¬ë¼ì´ë”ë¡œ ê°œë³„ ì¡°ì • ê°€ëŠ¥.
* Mixerì— ì›ë³¸ ì…ë ¥ë„ í•¨ê»˜ í¬í•¨ë˜ì–´ Dry/Wet ë¯¹ì‹± íš¨ê³¼ê°€ ìƒê¹ë‹ˆë‹¤.

```swift
for (i, (time, gain)) in zip(times, gains).enumerated() {
  delays.append(VariableDelay(input, time: time))
  faders.append(Fader(delays[i], gain: gain))
  mix.addInput(faders[i])
}
```

ì¦‰, `VariableDelay` â†’ `Fader` â†’ `Mixer` ìˆœìœ¼ë¡œ ì²´ì¸ êµ¬ì„±í•©ë‹ˆë‹¤.

---

## ğŸ”„ `updateDelays()`

* ìŠ¬ë¼ì´ë” ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ í˜¸ì¶œë˜ì–´ ë”œë ˆì´ ë° ê²Œì¸ ê°’ì„ ì‹¤ì‹œê°„ ë°˜ì˜í•©ë‹ˆë‹¤.

```swift
delays[i].time = times[i]
faders[i].gain = gains[i]
```

---

## âœ… ìš”ì•½

| êµ¬ì„± ìš”ì†Œ      | ì„¤ëª…                                               |
| ---------- | ------------------------------------------------ |
| ğŸ§ ë”œë ˆì´ íƒ€ì„  | `[0.1, 0.2, 0.4]`ì´ˆë¡œ ì§€ì •ëœ ì—¬ëŸ¬ ì§€ì ì—ì„œ ì…ë ¥ ì‹ í˜¸ë¥¼ ì§€ì—°        |
| ğŸš ê²Œì¸      | ê° ë”œë ˆì´ëœ ì‹ í˜¸ì˜ ë³¼ë¥¨ì„ ê°œë³„ ì¡°ì ˆ                             |
| ğŸ¼ ì‚¬ìš© íš¨ê³¼   | ë¦¬ë“¬ê° ìˆëŠ” ì—ì½”, ë‹¤ì¸µì ì¸ ë°˜í–¥, ë¦¬ë²„ë¸Œ ìœ ì‚¬ í™˜ê²½                    |
| ğŸ” ìŠ¬ë¼ì´ë” ì—°ë™ | `@Published` ê°’ì´ ë³€í•  ë•Œ `updateDelays()` í˜¸ì¶œë¡œ ì‹¤ì‹œê°„ ë°˜ì˜ |

---

## ğŸ“Š ì˜¤ë””ì˜¤ ì²´ì¸ êµ¬ì„±ë„

```
player
  â”‚
  â”œâ”€â”€â–¶ VariableDelay(time: 0.1) â”€â–¶ Fader(gain: 0.5) â”€â”
  â”œâ”€â”€â–¶ VariableDelay(time: 0.2) â”€â–¶ Fader(gain: 2.0) â”€â”¤
  â”œâ”€â”€â–¶ VariableDelay(time: 0.4) â”€â–¶ Fader(gain: 0.5) â”€â”¤
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Mixer (ìµœì¢… ì¶œë ¥)
```

---

ì´ êµ¬ì¡°ëŠ” **ë™ì¼í•œ ì†ŒìŠ¤ì—ì„œ ì—¬ëŸ¬ ë”œë ˆì´ ì‹œì ì„ ë§Œë“  ë‹¤ìŒ, ë³¼ë¥¨ ì¡°ì ˆ í›„ ë¯¹ì‹±**í•˜ëŠ” êµ¬ì¡°ë¡œ, ê³µê°„ê° ìˆê³  í’ë¶€í•œ ì‚¬ìš´ë“œë¥¼ ë§Œë“œëŠ” ë° ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤.
