---
title: "자바스크립트, JQuery(제이쿼리): 테이블의 행, 열 번호 표시 & 행, 열번호로 테이블 td 접근하기 (예제: 직선 거리 측정)"
date: 2019-03-11
categories: 
  - "DevLog"
  - "JavaScript"
---

테이블 요소에 접근할 때 엑셀처럼 행과 열의 번호(index)를 가지고 접근할 수 있다.

- 행 Element의 행의 번호 구하기: `[TR ELEMENT].rowIndex`
- 열 Element의 열의 번호 구하기: `[TD ELEMENT].cellIndex`
- 열 Element의 행의 번호 구하기: `[TD ELEMENT].parentNode.rowIndex`
- 행, 열 번호로 td Element 가져오기(JQuery): `$([TR Element의 선택자]).eq([행 번호]).find("td").eq([열 번호])`

* * *

#### 예제: 거리 구하기 (127번 줄 이후만 참고하면 됨)

[https://gist.github.com/ayaysir/7cb602605f04ead8468e3d931ed19377](https://gist.github.com/ayaysir/7cb602605f04ead8468e3d931ed19377)

```
<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        #mainTable {
            border: 1px solid black;
            border-collapse: collapse;
            width: 600px;
            height: 600px
        }

        #mainTable td {
            border: none;
        }
    </style>
</head>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<body>
    <div id=wrapper></div>

    <script>
        var $tableEl = $('<table/>', {
            id: "mainTable"
        })
        for (var i = 1; i <= 100; i++) {
            var $trEl = $('<tr/>')
            for (var j = 1; j <= 100; j++) {
                $trEl.append($('<td/>'))
            }
            $tableEl.append($trEl)
        }
        $('#wrapper').append($tableEl)
    </script>

    <p id="lblSelect1"><strong>선택 1:</strong> <span></span></p>
    <p id="lblSelect2"><strong>선택 2:</strong> <span></span></p>
    <p id="lblDistance"><strong>거리:</strong> <span></span></p>

    <script>
        window.onload = function() {

            function getDistance(coorObj1, coorObj2) {
                var x = coorObj2.row - coorObj1.row
                var y = coorObj2.col - coorObj1.col
                return Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2))
            }

            function drawLine(coorObj1, coorObj2) {
                
                var color = "lightgray"
                
                if(coorObj1.col > coorObj2.col){
                    var temp = coorObj2
                    coorObj2 = coorObj1
                    coorObj1 = temp
                } else if (coorObj1.row > coorObj2.row && coorObj1.col == coorObj2.col){
                    for(var i = coorObj2.row + 1; i < coorObj1.row; i++){
                        $("#mainTable tr").eq(i).find("td").eq(coorObj1.col).css("background-color", color)
                    }
                }
                
                // y = ax + 0
                var absX = Math.abs(coorObj2.row - coorObj1.row)
                var absY = Math.abs(coorObj2.col - coorObj1.col)

                var startpoint = 0
                var endpoint = absX > absY ? absX : absY
                // alert(absX + ":" + absY)

                var a, aCase;
                if(absX > absY){
                    a = (coorObj2.col - coorObj1.col) / (coorObj2.row - coorObj1.row)
                    aCase = "X"
                    if(coorObj2.row > coorObj1.row){
                        startpoint = 1;
                        endpoint = endpoint - 1 
                        // alert('dnl')
                    } else {
                        startpoint = 0;
                        endpoint = endpoint - 1
                        // alert('dkfo')
                    }
                    
                } else {
                    a = (coorObj2.row - coorObj1.row) / (coorObj2.col - coorObj1.col)
                    aCase = "Y"
                    startpoint = 0;
                    endpoint = endpoint - 1
                }

                for (var i = startpoint; i <= endpoint; i++) {
                    var targetTr;

                    if (coorObj2.col > coorObj1.col) {
                        
                        if (coorObj2.row > coorObj1.row) {
                            targetTr = (aCase != "X" ? coorObj1.row : coorObj2.col) + Math.abs(Math.round(y, 0))
                        } else if (coorObj2.row <= coorObj1.row){
                            targetTr = (aCase != "X" ? coorObj1.row : coorObj2.col) - Math.abs(Math.round(y, 0))
                        }
                    }

                    var y = a * i
                   // console.log("bet", Math.round(y, 0))

                    if(aCase == "X"){
                        if(coorObj1.row > coorObj2.row){
                          $("#mainTable tr").eq(coorObj2.row + i).find("td").eq(targetTr).css("background-color", color)  
                        } else {
                           $("#mainTable tr").eq(coorObj1.row + i).find("td").eq(coorObj1.col + Math.abs(Math.round(y, 0))).css("background-color", color) 
                        }
                        
                    } else {
                        $("#mainTable tr").eq(targetTr).find("td").eq(coorObj1.col + i).css("background-color", color)
                    }
                    
                }
            }

            var tdEl = document.getElementsByTagName("td")

            var currentCount = 1
            var coor1, coor2;
            $('#mainTable td').on("click", function(ev) {
                var rowIndex = ev.target.parentNode.rowIndex
                var colIndex = ev.target.cellIndex
                console.log(rowIndex, colIndex)

                $('#lblSelect' + currentCount + " span").text("[" + rowIndex + ", " + colIndex + "]")

                if (currentCount == 1) {
                    $("#mainTable td").css("background-color", "")
                    $("#lblSelect2 span").text("")
                    $("#lblDistance span").text("")

                    ev.target.style.backgroundColor = "green"
                    coor1 = {
                        row: rowIndex,
                        col: colIndex
                    }
                    currentCount++

                } else if (currentCount == 2) {
                    ev.target.style.backgroundColor = "red"
                    coor2 = {
                        row: rowIndex,
                        col: colIndex
                    }
                    $("#lblDistance span").text(Math.round(getDistance(coor1, coor2), 2))
                    currentCount = 1

                    drawLine(coor1, coor2)
                }

            })
        }
    </script>
</body>

</html>
```

 ![](/assets/img/wp-content/uploads/2019/03/distance.png)
