---
title: "Xcode: CocoaPods í”„ë¡œì íŠ¸ì—ì„œ Build Phaseì˜ Run Scriptë¥¼ ì´ìš©í•´ íŒ¨ì¹˜ ë„˜ë²„ ì¦ê°€"
date: 2025-04-24
categories: 
  - "DevLog"
  - "Xcode/iOSê¸°íƒ€"
---

##### **ê´€ë ¨ ê¸€ Run Script**

- [Swift Package Manager(SPM)ì™€ CocoaPodsë¥¼ ë™ì‹œì— ëŒ€ì‘í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ë§Œë“¤ê¸° (1)](http://yoonbumtae.com/?p=5011)

Â 

#### **ë²„ì „ ë„˜ë²„ êµ¬ì„±**

ì˜ˆ) [Semantic Versioning](https://en.wikipedia.org/wiki/Software_versioning#Semantic_versioning)Â ë¼ëŠ” ë°©ë²•ì— ë”°ë¥´ë©´Â `1.0.0` ì´ë¼ëŠ” ë²„ì „ì´ ìˆì„ ë•Œ ì•ì—ì„œë¶€í„° ìˆœì„œëŒ€ë¡œ

- ë©”ì´ì € ë²„ì „
- ë§ˆì´ë„ˆ ë²„ì „
- íŒ¨ì¹˜ ë²„ì „

ë¼ê³  í•©ë‹ˆë‹¤.

> **Semantic Versioning(SemVer)**ì€ ì†Œí”„íŠ¸ì›¨ì–´ ë²„ì „ì„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê·œì¹™ìœ¼ë¡œ, ë²„ì „ ë²ˆí˜¸ë¥¼ ì£¼ë²„ì „.ë¶€ë²„ì „.íŒ¨ì¹˜ë²„ì „ í˜•ì‹ìœ¼ë¡œ êµ¬ì„±í•©ë‹ˆë‹¤. ì´ ë²„ì „ ê·œì¹™ì€ ë³€ê²½ ì‚¬í•­ì˜ ìœ„í—˜ë„ì™€ ê¸°ëŠ¥ì  ì˜ë¯¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë²„ì „ì„ ì¦ê°€ì‹œí‚µë‹ˆë‹¤.
> 
> **ì£¼ë²„ì „(Major)**ì€ í˜¸í™˜ë˜ì§€ ì•ŠëŠ” í° ë³€ê²½ì´ ìˆì„ ë•Œ ì¦ê°€í•˜ë©°, **ë¶€ë²„ì „(Minor)**ì€ ê¸°ì¡´ ê¸°ëŠ¥ì„ í•´ì¹˜ì§€ ì•ŠëŠ” ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ ì¶”ê°€ë  ë•Œ ì¦ê°€í•©ë‹ˆë‹¤. **íŒ¨ì¹˜ë²„ì „(Patch)**ì€ ë²„ê·¸ ìˆ˜ì •ì´ë‚˜ ì‚¬ì†Œí•œ ë³€ê²½ ì‹œì— ì¦ê°€í•©ë‹ˆë‹¤. ì¦‰, ë³€ê²½ì˜ ìœ„í—˜ë„ê°€ ë†’ì„ìˆ˜ë¡ ì•ìë¦¬ë¥¼ ì¦ê°€ì‹œí‚¤ê³ , ìœ„í—˜ë„ê°€ ë‚®ì„ìˆ˜ë¡ ë’¤ì˜ ìˆ«ìê°€ ì¦ê°€í•©ë‹ˆë‹¤.
> 
> ë˜í•œ -alpha, -betaì™€ ê°™ì€ í”„ë¦¬ë¦´ë¦¬ì¦ˆ íƒœê·¸ëŠ” ì•„ì§ ì•ˆì •ë˜ì§€ ì•Šì€ ì‚¬ì „ ë¦´ë¦¬ìŠ¤ ë²„ì „ì„ ì˜ë¯¸í•˜ë©°, ì£¼ë²„ì „ì´ 0ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” 0.y.z í˜•ì‹ì€ ê°œë°œ ì´ˆê¸° ìƒíƒœë¡œ ì–¸ì œë“ ì§€ í˜¸í™˜ì„±ì´ ê¹¨ì§ˆ ìˆ˜ ìˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, 2.1.5ë¥¼ ì‚¬ìš©í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ëŠ” 2.2.3ê³¼ëŠ” í˜¸í™˜ë˜ì§€ë§Œ, 3.2.4ì™€ëŠ” í˜¸í™˜ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Â 

#### **Run Script ë¡œ podspec íŒŒì¼ì˜ íŒ¨ì¹˜ ë²„ì „ ì¦ê°€**

Xcodeì—ì„œ ë§¤ ë¹Œë“œë§ˆë‹¤ `.podspec` íŒŒì¼ì˜ \*\*íŒ¨ì¹˜ ë²„ì „(Patch)\*\*ì„ ìë™ìœ¼ë¡œ +1 í•´ì£¼ëŠ” **Run Script**ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ìœ„ì¹˜í•œ `BGSMM_DevKit.podspec` íŒŒì¼ì„ ì°¾ì•„ í˜„ì¬ ë²„ì „ì„ ì½ê³ , íŒ¨ì¹˜ ë²„ì „ì„ ì¦ê°€ì‹œí‚¨ ë’¤ ë‹¤ì‹œ íŒŒì¼ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.

Â 

##### **podspec íŒŒì¼ì´ë€ ë¬´ì—‡ì¸ê°€ìš”?**

podspec íŒŒì¼ì€ CocoaPodsì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë©”íƒ€ ì •ë³´ë¥¼ ì •ì˜í•˜ëŠ” íŒŒì¼ì…ë‹ˆë‹¤. Swift ë˜ëŠ” Objective-Cë¡œ ì‘ì„±ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì™¸ë¶€ì—ì„œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ íŒ¨í‚¤ì§•í•  ë•Œ, ì´ íŒŒì¼ì„ í†µí•´ í•´ë‹¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì´ë¦„, ë²„ì „, ì†ŒìŠ¤ ê²½ë¡œ, ì¢…ì†ì„± ë“±ì„ ì •ì˜í•©ë‹ˆë‹¤. Run Script

ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒì€ BGSMM\_DevKitì´ë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ podspec ì¼ë¶€ì…ë‹ˆë‹¤:

```
Pod::Spec.new do |s|
    s.name = 'BGSMM_DevKit'
    s.version = '1.1.4'
```

ì—¬ê¸°ì„œ `s.name`ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì´ë¦„ì„, `s.version`ì€ í˜„ì¬ ë²„ì „ ì •ë³´ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì´ ê°’ì€ `pod trunk push` ê°™ì€ ë°°í¬ ëª…ë ¹ ì‹œ ì‚¬ìš©ë˜ë©°, CocoaPods ì €ì¥ì†Œì— ì˜¬ë¼ê°„ í›„ì—ëŠ” í•œ ë²ˆ ë“±ë¡ëœ ë²„ì „ì€ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì •í™•í•œ ë²„ì „ ê´€ë¦¬ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.

CocoaPods í”„ë¡œì íŠ¸ì—ì„œ Build Phaseì˜ Run Scriptë¥¼ ì´ìš©í•´ íŒ¨ì¹˜ ë„˜ë²„ ì¦ê°€

##### **Step 1: ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì—ì„œ Pods í”„ë¡œì íŠ¸ë¥¼ í´ë¦­í•œ ë’¤ Target > Build Phase > \[+\] ë²„íŠ¼ì„ ëˆŒëŸ¬ Run Scriptë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.**

\[caption id="attachment\_6991" align="alignnone" width="336"\] ![](/assets/img/wp-content/uploads/2025/04/ìŠ¤í¬ë¦°ìƒ·-2025-04-24-ì˜¤í›„-8.11.11-ë³µì‚¬ë³¸.jpg) Pods í´ë¦­\[/caption\]

\[caption id="attachment\_6992" align="alignnone" width="721"\] ![](/assets/img/wp-content/uploads/2025/04/ìŠ¤í¬ë¦°ìƒ·-2025-04-24-ì˜¤í›„-8.18.22-ë³µì‚¬ë³¸.jpg) ìƒë‹¨ì˜ `[+]` ë²„íŠ¼ì„ ëˆŒëŸ¬ `Run Script` ì¶”ê°€\[/caption\]Â 

##### **Step 2: í˜¸í™˜ì„±ì„ ìœ„í•´ Shellì„ / b i n / b a s hë¡œ ì„¤ì •**

\[caption id="attachment\_6993" align="alignnone" width="753"\] ![](/assets/img/wp-content/uploads/2025/04/ìŠ¤í¬ë¦°ìƒ·-2025-04-24-ì˜¤í›„-8.00.59-ë³µì‚¬ë³¸.jpg) Shell ë³€ê²½\[/caption\]

ë‚˜ë¨¸ì§€ ì˜µì…˜ì€ ê·¸ëŒ€ë¡œ ë‘¡ë‹ˆë‹¤.

Â 

##### **Step 3: ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œ ì‘ì„±**

```
echo "ğŸš€ Run Script ì‹¤í–‰ë¨! ${PROJECT_DIR}"

LIBRARY_ROOT=$(cd "${PROJECT_DIR}/../.." && pwd)
PODSPEC_FILE="${LIBRARY_ROOT}/BGSMM_DevKit.podspec"

# í˜„ì¬ ë²„ì „ ì¶”ì¶œ (ìˆ«ì 3ê°œë§Œ í•„í„°ë§)
versionLine=$(grep 's.version' "$PODSPEC_FILE")
versionString=$(echo "$versionLine" | grep -oE '[0-9]+\.[0-9]+\.[0-9]+')

IFS='.' read -r major minor patch <<< "$versionString"

# íŒ¨ì¹˜ ë²„ì „ì´ ì •ìˆ˜ì¸ì§€ í™•ì¸
if ! [[ "$patch" =~ ^[0-9]+$ ]]; then
  echo "âŒ patch ë²„ì „ì´ ì •ìˆ˜ê°€ ì•„ë‹™ë‹ˆë‹¤: $patch"
  exit 1
fi

# íŒ¨ì¹˜ ë²„ì „ ì¦ê°€
newPatch=$((patch + 1))
newVersion="${major}.${minor}.${newPatch}"

# êµì²´ (ì‘ì€/í°ë”°ì˜´í‘œ ëª¨ë‘ ëŒ€ì‘)
sed -i '' -E "s/(s\.version[[:space:]]*=[[:space:]]*['\"])$versionString(['\"])/\1$newVersion\2/" "$PODSPEC_FILE"

# ë³€ê²½ë˜ì—ˆëŠ”ì§€ í™•ì¸
if grep -q "$newVersion" "$PODSPEC_FILE"; then
  echo "podspec ë²„ì „ì´ $versionString â†’ $newVersion ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤."
else
  echo "âŒ ë²„ì „ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. í˜„ì¬ ë²„ì „: $versionString"
  exit 1  # ì‹¤íŒ¨ë¡œ ê°„ì£¼í•˜ê³  ë¹Œë“œ ì¤‘ë‹¨
fi
```

##### **ìŠ¤í¬ë¦½íŠ¸ ì‘ë™ ë°©ì‹ ìš”ì•½**

1. `PROJECT_DIR` ê¸°ì¤€ìœ¼ë¡œ `.podspec` ê²½ë¡œ ì¶”ì  - `PROJECT_DIR` ì™€ ì‹¤ì œ ìœ„ì¹˜ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê²½ìš° ìœ„ì¹˜ë¥¼ ì¡°ì •í•©ë‹ˆë‹¤.
2. í˜„ì¬ ë²„ì „ ë¬¸ìì—´(x.y.z) ì¶”ì¶œ
3. z(íŒ¨ì¹˜ë²„ì „)ë¥¼ +1 ì¦ê°€
4. ì›ë˜ ë²„ì „ì„ ìƒˆ ë²„ì „ìœ¼ë¡œ êµì²´
5. ì‹¤ì œ êµì²´ë˜ì—ˆëŠ”ì§€ ê²€ì¦ í›„ ì„±ê³µ/ì‹¤íŒ¨ ë©”ì‹œì§€ ì¶œë ¥

Â 

##### **Run Scriptë¥¼ ì´ìš©í•œ ìë™í™”ì˜ ì¥ì **

ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ `.podspec`ì„ ìˆ˜ì •í•˜ê³  ì»¤ë°‹í•  ë•Œë§ˆë‹¤ **ìë™ìœ¼ë¡œ ë²„ì „ì´ ì—…ë°ì´íŠ¸ë˜ë¯€ë¡œ**,ì‹¤ìˆ˜ë¡œ ê°™ì€ ë²„ì „ìœ¼ë¡œ ë°°í¬í•˜ëŠ” ì¼ì„ ë°©ì§€í•  ìˆ˜ ìˆê³ , **CI/CD ìë™í™”ì—ë„ ìœ ë¦¬**í•©ë‹ˆë‹¤.

ë‹¨, í•œ ë²ˆ ë¦´ë¦¬ì¦ˆëœ ë²„ì „ì€ CocoaPods ì„œë²„ì— ì¬ë“±ë¡í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—, **ì‹¤ì œ ë°°í¬ ì „ì— ë°˜ë“œì‹œ ì»¤ë°‹ + íƒœê·¸ ì‘ì—…ë„ ë³‘í–‰**í•´ ì£¼ì„¸ìš”.

<!--[rcblock id="6686"]-->
