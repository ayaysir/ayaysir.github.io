<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="ko" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Swift: iOS에서 커스텀 카메라 만들기 (2) – AVCapturePhotoOutput으로 고화질 사진 찍기" />
<meta property="og:locale" content="ko" />
<meta name="description" content="소개" />
<meta property="og:description" content="소개" />
<link rel="canonical" href="https://ayaysir.github.io/posts/swift-ios%EC%97%90%EC%84%9C-%EC%BB%A4%EC%8A%A4%ED%85%80-%EC%B9%B4%EB%A9%94%EB%9D%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0-1-avcapturephotooutput%EC%9C%BC%EB%A1%9C-%EA%B3%A0%ED%99%94%EC%A7%88/" />
<meta property="og:url" content="https://ayaysir.github.io/posts/swift-ios%EC%97%90%EC%84%9C-%EC%BB%A4%EC%8A%A4%ED%85%80-%EC%B9%B4%EB%A9%94%EB%9D%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0-1-avcapturephotooutput%EC%9C%BC%EB%A1%9C-%EA%B3%A0%ED%99%94%EC%A7%88/" />
<meta property="og:site_name" content="BGSMM" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-07-16T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Swift: iOS에서 커스텀 카메라 만들기 (2) – AVCapturePhotoOutput으로 고화질 사진 찍기" />
<meta name="google-site-verification" content="pvY2wZTkfhJgJGUCvK9k0h-YX3Be3V-u1J4pE6FriWA" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-07-16T00:00:00+09:00","datePublished":"2023-07-16T00:00:00+09:00","description":"소개","headline":"Swift: iOS에서 커스텀 카메라 만들기 (2) – AVCapturePhotoOutput으로 고화질 사진 찍기","mainEntityOfPage":{"@type":"WebPage","@id":"https://ayaysir.github.io/posts/swift-ios%EC%97%90%EC%84%9C-%EC%BB%A4%EC%8A%A4%ED%85%80-%EC%B9%B4%EB%A9%94%EB%9D%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0-1-avcapturephotooutput%EC%9C%BC%EB%A1%9C-%EA%B3%A0%ED%99%94%EC%A7%88/"},"url":"https://ayaysir.github.io/posts/swift-ios%EC%97%90%EC%84%9C-%EC%BB%A4%EC%8A%A4%ED%85%80-%EC%B9%B4%EB%A9%94%EB%9D%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0-1-avcapturephotooutput%EC%9C%BC%EB%A1%9C-%EA%B3%A0%ED%99%94%EC%A7%88/"}</script>
<!-- End Jekyll SEO tag -->


  <title>Swift: iOS에서 커스텀 카메라 만들기 (2) – AVCapturePhotoOutput으로 고화질 사진 찍기 | BGSMM
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="BGSMM">
<meta name="application-name" content="BGSMM">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- Scripts -->

  <script src="/assets/js/dist/theme.min.js"></script>

  <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script>







<script defer src="/assets/js/dist/post.min.js"></script>



<!-- Pageviews -->

  

  



  

  <!-- A placeholder to allow defining custom metadata -->

</head>

  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="/./assets/img/favicons/mstile-150x150.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <a class="site-title d-block" href="/">BGSMM</a>
    <p class="site-subtitle fst-italic mb-0">음악, 레트로테크 좋아함</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    

      
        <a
          href="https://github.com/ayaysir"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    

      
        <a
          href="javascript:location.href = 'mailto:' + ['yoonbumtae','gmail.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
          
        

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">Home</a>
            </span>

          
        
          
        
          
            
              <span>Swift: iOS에서 커스텀 카메라 만들기 (2) – AVCapturePhotoOutput으로 고화질 사진 찍기</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link" aria-label="Search">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->




  
  

  
    
      
      
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  
    

    
    

    

    
    

    
    
    

    
      

      
      
      

      
    
      

      
      
      

      
    

    <!-- take out classes -->
    

    

    
    

    

    
      
    

    <!-- lazy-load images -->
    

    
      <!-- make sure the `<img>` is wrapped by `<a>` -->
      

      
        <!-- create the image wrapper -->
        

        
        
      
    

    <!-- combine -->
    
  

  


<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  




<!-- return -->










<article class="px-1" data-toc="true">
  <header>
    <h1 data-toc-skip>Swift: iOS에서 커스텀 카메라 만들기 (2) – AVCapturePhotoOutput으로 고화질 사진 찍기</h1>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1689433200"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Jul 16, 2023
</time>

      </span>

      <!-- lastmod date -->
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              <a href="https://github.com/ayaysir">ayaysir</a>
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="4000 words"
>
  <em>22 min</em> read</span>

        </div>
      </div>
    </div>
  </header>

  
    <div id="toc-bar" class="d-flex align-items-center justify-content-between invisible">
      <span class="label text-truncate">Swift: iOS에서 커스텀 카메라 만들기 (2) – AVCapturePhotoOutput으로 고화질 사진 찍기</span>
      <button type="button" class="toc-trigger btn me-1">
        <i class="fa-solid fa-list-ul fa-fw"></i>
      </button>
    </div>

    <button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm">
      <span class="label ps-2 pe-1">Contents</span>
      <i class="fa-solid fa-angle-right fa-fw"></i>
    </button>

    <dialog id="toc-popup" class="p-0">
      <div class="header d-flex flex-row align-items-center justify-content-between">
        <div class="label text-truncate py-2 ms-4">Swift: iOS에서 커스텀 카메라 만들기 (2) – AVCapturePhotoOutput으로 고화질 사진 찍기</div>
        <button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75">
          <i class="fas fa-close"></i>
        </button>
      </div>
      <div id="toc-popup-content" class="px-4 py-3 pb-4"></div>
    </dialog>
  

  <div class="content">
    <h2 id="소개"><span class="me-2"><strong>소개</strong></span><a href="#소개" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>이전에도 한 차례 커스텀 카메라에 대해 다룬적이 있는데 해당 방식은 비디오의 프레임을 캡처해서 저장하는 방식이었습니다.</p>

<ul>
  <li><a href="/posts/swift-ios에서-커스텀-카메라-만들기">Swift: iOS에서 커스텀 카메라 만들기 (1) - 비디오 캡처 방식 활용</a></li>
</ul>

<p>이러한 방식에 대한 장점도 많이 있지만, 해상도가 상대적으로 낮은 단점도 있어서 다른 방식인 <code class="language-plaintext highlighter-rouge">AVCapturePhotoOutput</code>을 이용해 고화질의 사진을 얻는 방법에 대해 알아보겠습니다.</p>

<p>스토리보드(UIKit) 기준으로 진행됩니다.</p>

<p> </p>

<h2 id="방법"><span class="me-2"><strong>방법</strong></span><a href="#방법" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="step-0-infoplist의-권한-설정-및-import"><span class="me-2"><strong>Step 0: Info.plist의 권한 설정 및 import</strong></span><a href="#step-0-infoplist의-권한-설정-및-import" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>아래와 같이 <code class="language-plaintext highlighter-rouge">Info.plist</code> 파일에 두 개의 권한 허용 여부를 묻는 메시지를 추가합니다.</p>

<p><a href="/assets/img/wp-content/uploads/2023/07/screenshot-2023-07-16-pm-4.28.02-copy.jpg" class="popup img-link shimmer"><img src="/assets/img/wp-content/uploads/2023/07/screenshot-2023-07-16-pm-4.28.02-copy.jpg" alt="" loading="lazy"></a></p>

<ul>
  <li><strong>Privacy - Photo Library Usage Description (</strong><code class="language-plaintext highlighter-rouge">NSPhotoLibraryUsageDescription</code><strong>)</strong>
    <ul>
      <li>사진 라이브러리에 접근하기 위한 권한입니다. 거부시 사진을 저장할 수 없습니다.</li>
    </ul>
  </li>
  <li><strong>Privacy - Camera Usage Description (</strong><code class="language-plaintext highlighter-rouge">NSCameraUsageDescription</code><strong>)</strong>
    <ul>
      <li>카메라 기기에 접근하기 위한 권한입니다. 거부시 카메라 기능을 사용할 수 없습니다.</li>
    </ul>
  </li>
</ul>

<p> </p>

<p>그리고 뷰 컨트롤러의 코드에 아래를 추가로 임포트합니다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">import AVFoundation</code></li>
  <li><code class="language-plaintext highlighter-rouge">import Photos</code></li>
</ul>

<p> </p>

<h3 id="step-1뷰-컨트롤러에-카메라-이미지-관련-멤버-변수-추가"><span class="me-2"><strong>Step 1: 뷰 컨트롤러에 카메라, 이미지 관련 멤버 변수 추가</strong></span><a href="#step-1뷰-컨트롤러에-카메라-이미지-관련-멤버-변수-추가" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre><span class="c1">// MARK: - Vars</span>
<span class="k">var</span> <span class="nv">previewLayer</span><span class="p">:</span> <span class="kt">AVCaptureVideoPreviewLayer</span><span class="o">!</span>
<span class="k">var</span> <span class="nv">captureSession</span><span class="p">:</span> <span class="kt">AVCaptureSession</span><span class="o">!</span>
<span class="k">var</span> <span class="nv">backCameraInput</span><span class="p">:</span> <span class="kt">AVCaptureDeviceInput</span><span class="o">!</span>
<span class="k">var</span> <span class="nv">frontCameraInput</span><span class="p">:</span> <span class="kt">AVCaptureDeviceInput</span><span class="o">!</span>

<span class="k">var</span> <span class="nv">photoSettings</span><span class="p">:</span> <span class="kt">AVCapturePhotoSettings</span> <span class="p">{</span>
    <span class="c1">// NSInvalidArgumentException', reason: '*** -[AVCapturePhotoOutput capturePhotoWithSettings:delegate:]</span>
    <span class="c1">// Settings may not be re-used'</span>
    
    <span class="k">var</span> <span class="nv">settings</span> <span class="o">=</span> <span class="kt">AVCapturePhotoSettings</span><span class="p">()</span>
    <span class="c1">// photoOutput 의 codec의 hevc 가능시 photoSettings의 codec을 hevc로 설정하는 코드입니다.</span>
    <span class="c1">// hevc 불가능한 경우에는 jpeg codec을 사용하도록 합니다.</span>
    <span class="k">if</span> <span class="n">photoOutput</span><span class="o">.</span><span class="n">availablePhotoCodecTypes</span><span class="o">.</span><span class="nf">contains</span><span class="p">(</span><span class="o">.</span><span class="n">hevc</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="kt">AVCapturePhotoSettings</span><span class="p">(</span><span class="nv">format</span><span class="p">:</span> <span class="p">[</span><span class="kt">AVVideoCodecKey</span><span class="p">:</span> <span class="kt">AVVideoCodecType</span><span class="o">.</span><span class="n">hevc</span><span class="p">])</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="kt">AVCapturePhotoSettings</span><span class="p">(</span><span class="nv">format</span><span class="p">:</span> <span class="p">[</span><span class="kt">AVVideoCodecKey</span><span class="p">:</span> <span class="kt">AVVideoCodecType</span><span class="o">.</span><span class="n">jpeg</span><span class="p">])</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="n">settings</span>
<span class="p">}</span>
<span class="k">var</span> <span class="nv">photoOutput</span><span class="p">:</span> <span class="kt">AVCapturePhotoOutput</span> <span class="o">=</span> <span class="kt">AVCapturePhotoOutput</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">previewLayer</code>: 실시간으로 카메라에 비쳐지는 모습을 보기 위한 영역의 레이어입니다.</li>
  <li><code class="language-plaintext highlighter-rouge">captureSession</code>: 캡처 세션은 카메라의 입출력 신호 및 데이터를 중재하는 역할을 합니다.</li>
  <li><code class="language-plaintext highlighter-rouge">back/frontCameraInput</code>: 전/후면 카메라로 들어오는 신호들을 처리하는 역할을 합니다.</li>
  <li><code class="language-plaintext highlighter-rouge">photoSettings</code>: <code class="language-plaintext highlighter-rouge">photoOutput</code>에서 사용할 각종 세팅들을 지정할 수 있습니다.
    <ul>
      <li>세팅은 재지정할 수 없기 때문에 이 단계에서 computed property로 미리 지정합니다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">photoOutput</code>: <a href="https://developer.apple.com/documentation/avfoundation/avcapturephotooutput"><code class="language-plaintext highlighter-rouge">AVCapturePhotoOutput</code></a>은 기기의 카메라의 다양한 기능을 사용할 수 있도록 제공하는 인터페이스입니다.
    <ul>
      <li>라이브 포토를 비롯한 다양한 사진 옵션을 설정할 수 있습니다.</li>
      <li>이번 예제에서 주요하게 사용할 기능입니다.</li>
    </ul>
  </li>
</ul>

<p> </p>

<h3 id="step-2-viewdidappear_에-카메라-세팅-코드-작성"><span class="me-2"><strong>Step 2: viewDidAppear(:_)에 카메라 세팅 코드 작성</strong></span><a href="#step-2-viewdidappear_에-카메라-세팅-코드-작성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>카메라에 접근하기 위해 다음 두 가지 작업이 필요합니다.</p>

<ol>
  <li>먼저 권한 허용 여부가 설정되지 않았다면 권한 허용 여부를 사용자한테 묻는 다이얼로그를 표시하고</li>
  <li>다음 카메라를 세팅합니다.</li>
</ol>

<p>해당 과정을 코드로 기록하면 다음과 같습니다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidAppear</span><span class="p">(</span><span class="n">_</span> <span class="nv">animated</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">super</span><span class="o">.</span><span class="nf">viewDidAppear</span><span class="p">(</span><span class="n">animated</span><span class="p">)</span>
    
    <span class="nf">checkCameraPermissions</span><span class="p">()</span>
    <span class="nf">setupPhotoCamera</span><span class="p">()</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>권한 설정 부분 <code class="language-plaintext highlighter-rouge">checkCameraPermissions()</code>은 아래 코드를 뷰 컨트롤러 내에 추가하면 되고 분량상 자세한 내용은 다루지 않겠습니다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">checkCameraPermissions</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">cameraAuthStatus</span> <span class="o">=</span>  <span class="kt">AVCaptureDevice</span><span class="o">.</span><span class="nf">authorizationStatus</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="kt">AVMediaType</span><span class="o">.</span><span class="n">video</span><span class="p">)</span>
    <span class="k">switch</span> <span class="n">cameraAuthStatus</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nv">authorized</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">case</span> <span class="o">.</span><span class="nv">denied</span><span class="p">:</span>
        <span class="c1">// TODO: - 카메라 권한 허용 유도하는 기능</span>
        <span class="nf">abort</span><span class="p">()</span>
    <span class="k">case</span> <span class="o">.</span><span class="nv">notDetermined</span><span class="p">:</span>
        <span class="kt">AVCaptureDevice</span><span class="o">.</span><span class="nf">requestAccess</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="kt">AVMediaType</span><span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="nv">completionHandler</span><span class="p">:</span>
                                        <span class="p">{</span> <span class="p">(</span><span class="n">authorized</span><span class="p">)</span> <span class="k">in</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">authorized</span><span class="p">){</span>
                <span class="c1">// TODO: - 카메라 권한 허용 유도하는 기능</span>
                <span class="nf">abort</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="p">})</span>
    <span class="k">case</span> <span class="o">.</span><span class="nv">restricted</span><span class="p">:</span>
        <span class="c1">// 시스템 에러</span>
        <span class="nf">abort</span><span class="p">()</span>
    <span class="kd">@unknown</span> <span class="k">default</span><span class="p">:</span>
        <span class="nf">fatalError</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>카메라 세팅은 다음 단계로 진행됩니다.</p>

<!-- \[the\_ad id="3513"\] -->

<h4 id="1-setupphotocamera-추가"><span class="me-2"><strong>1: setupPhotoCamera() 추가</strong></span><a href="#1-setupphotocamera-추가" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>먼저 메인 스레드가 아닌 다른 스레드에서 코드가 실행될 수 있도록 합니다. 그 이유는 실행 코드 중 <code class="language-plaintext highlighter-rouge">AVCaptureSession.startRunning()</code>이 해당 작업이 실행될 때까지 시스템 흐름이 멈추는 블록 호출(block call)이기 때문에 메인 스레드에 추가할 경우 UI가 멈출 수 있는 위험이 있기 때문입니다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">setupPhotoCamera</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 메인 스레드에서 실행 방지 - startRunning()이 차단 호출(block call)이기 때문</span>
    <span class="kt">DispatchQueue</span><span class="o">.</span><span class="nf">global</span><span class="p">(</span><span class="nv">qos</span><span class="p">:</span> <span class="o">.</span><span class="n">userInitiated</span><span class="p">)</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span> <span class="p">[</span><span class="k">unowned</span> <span class="k">self</span><span class="p">]</span> <span class="k">in</span>
        <span class="o">...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이하 단계 모두 <code class="language-plaintext highlighter-rouge">setupPhotoCamera()</code>의 스레드 클로저 내에 순차적으로 추가합니다.</p>

<p> </p>

<h4 id="2-카메라-세션-초기화-및-구성사항configuration-시작"><span class="me-2"><strong>2: 카메라 세션 초기화 및 구성사항(configuration) 시작</strong></span><a href="#2-카메라-세션-초기화-및-구성사항configuration-시작" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="c1">// 세션 초기화</span>
<span class="n">captureSession</span> <span class="o">=</span> <span class="kt">AVCaptureSession</span><span class="p">()</span>
<span class="c1">// 구성(configuration) 시작</span>
<span class="n">captureSession</span><span class="o">.</span><span class="nf">beginConfiguration</span><span class="p">()</span>

</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li>카메라 입출력을 관리할 수 있는 <code class="language-plaintext highlighter-rouge">AVCaptureSession</code>을 초기화합니다.</li>
  <li>해당 세션의 구성을 시작합니다. 나중에 커밋(commit)을 함으로써 구성 사항이 반영됩니다.</li>
</ul>

<p> </p>

<h4 id="3-세션이-사진-프리셋을-지원하는-경우-해당-프리셋을-설정"><span class="me-2"><strong>3: 세션이 사진 프리셋을 지원하는 경우 해당 프리셋을 설정</strong></span><a href="#3-세션이-사진-프리셋을-지원하는-경우-해당-프리셋을-설정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="k">if</span> <span class="n">captureSession</span><span class="o">.</span><span class="nf">canSetSessionPreset</span><span class="p">(</span><span class="o">.</span><span class="n">photo</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">captureSession</span><span class="o">.</span><span class="n">sessionPreset</span> <span class="o">=</span> <span class="o">.</span><span class="n">photo</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p> </p>

<h4 id="4-광역-색상-지원-설정"><span class="me-2"><strong>4: 광역 색상 지원 설정</strong></span><a href="#4-광역-색상-지원-설정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="c1">// 사용 가능한 경우 세션이 자동으로 광역 색상을 사용해야 하는지 여부를 지정합니다. (기본값 true)</span>
<span class="n">captureSession</span><span class="o">.</span><span class="n">automaticallyConfiguresCaptureDeviceForWideColor</span> <span class="o">=</span> <span class="kc">true</span>
</pre></td></tr></tbody></table></code></div></div>

<p> </p>

<h4 id="5-디바이스-변수에-전후면-카메라-디바이스를-지정"><span class="me-2"><strong>5: 디바이스 변수에 전/후면 카메라 디바이스를 지정</strong></span><a href="#5-디바이스-변수에-전후면-카메라-디바이스를-지정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c1">// 후면 카메라 디바이스</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">backCamera</span> <span class="o">=</span> <span class="kt">AVCaptureDevice</span><span class="o">.</span><span class="nf">default</span><span class="p">(</span><span class="o">.</span><span class="n">builtInWideAngleCamera</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="nv">position</span><span class="p">:</span> <span class="o">.</span><span class="n">back</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span>
<span class="p">}</span>

<span class="c1">// 전면 카메라 디바이스</span>
<span class="k">guard</span> <span class="k">let</span> <span class="nv">frontCamera</span> <span class="o">=</span> <span class="kt">AVCaptureDevice</span><span class="o">.</span><span class="nf">default</span><span class="p">(</span><span class="o">.</span><span class="n">builtInWideAngleCamera</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="nv">position</span><span class="p">:</span> <span class="o">.</span><span class="n">front</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li>디바이스 변수는 인풋 신호를 받아들일 때 파라미터로 지정할 수 있습니다.</li>
</ul>

<p> </p>

<h4 id="6-카메라-인풋을-기기로부터-받도록-지정하고-세션의-인풋-목록에-추가"><span class="me-2"><strong>6: 카메라 인풋을 기기로부터 받도록 지정하고, 세션의 인풋 목록에 추가</strong></span><a href="#6-카메라-인풋을-기기로부터-받도록-지정하고-세션의-인풋-목록에-추가" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="c1">// 생성된 captureSession에 device input을 생성 및 연결하고,</span>
<span class="c1">// device output을 연결하는 코드입니다.</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="n">backCameraInput</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">AVCaptureDeviceInput</span><span class="p">(</span><span class="nv">device</span><span class="p">:</span> <span class="n">backCamera</span><span class="p">)</span>
    <span class="n">frontCameraInput</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">AVCaptureDeviceInput</span><span class="p">(</span><span class="nv">device</span><span class="p">:</span> <span class="n">frontCamera</span><span class="p">)</span>
        
    <span class="c1">// captureSession에 cameraInput을 받도록 설정</span>
    <span class="n">captureSession</span><span class="o">.</span><span class="nf">addInput</span><span class="p">(</span><span class="n">backCameraInput</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span>  <span class="p">{</span>
    <span class="nf">debugPrint</span><span class="p">(</span><span class="s">"Camera Input Error:"</span><span class="p">,</span> <span class="n">error</span><span class="o">.</span><span class="n">localizedDescription</span><span class="p">)</span>
<span class="p">}</span>

</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li>일반적으로 후면 카메라가 처음에 사용되므로 <code class="language-plaintext highlighter-rouge">backCamera</code>를 맨 처음 인풋 목록에 지정합니다.
    <ul>
      <li>전/후면 카메라 전환 방법은 나중에 설명합니다.</li>
    </ul>
  </li>
</ul>

<p> </p>

<h4 id="7-photooutput을-캡처-세션의-아웃풋-목록에-추가"><span class="me-2"><strong>7: photoOutput을 캡처 세션의 아웃풋 목록에 추가</strong></span><a href="#7-photooutput을-캡처-세션의-아웃풋-목록에-추가" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="c1">// 고해상도의 이미지 캡처 가능 설정</span>
<span class="c1">// 16.0에서 deprecated됨</span>
<span class="k">if</span> <span class="k">#unavailable</span><span class="p">(</span><span class="n">iOS</span> <span class="mf">16.0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">photoOutput</span><span class="o">.</span><span class="n">isHighResolutionCaptureEnabled</span> <span class="o">=</span> <span class="kc">true</span>
<span class="p">}</span>

<span class="c1">// CaptureSession에 photoOutput을 추가</span>
<span class="n">captureSession</span><span class="o">.</span><span class="nf">addOutput</span><span class="p">(</span><span class="n">photoOutput</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li>iOS 16 미만인 경우 <code class="language-plaintext highlighter-rouge">isHighResolutionCaptureEnabled</code> 옵션을 <code class="language-plaintext highlighter-rouge">true</code>로 지정합니다.
    <ul>
      <li>16버전 이상에서는 deprecated되었으며, 해당 옵션을 따로 지정하지 않아도 최대 해상도로 촬영됩니다.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">addOutput</code>으로 <code class="language-plaintext highlighter-rouge">photoOutput</code>을 캡처 세션에 추가합니다.</li>
</ul>

<p> </p>

<h4 id="8-카메라-미리보기-화면-추가"><span class="me-2"><strong>8: 카메라 미리보기 화면 추가</strong></span><a href="#8-카메라-미리보기-화면-추가" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>카메라를 미리보기 할 수 없다면 내가 도대체 어떤 대상을 찍고 있고 어떤 모습으로 찍히는지 전혀 알 수 없을 것입니다.</p>

<p>아래 코드를 <code class="language-plaintext highlighter-rouge">setupPhotoCamera()</code> 내부에 추가합니다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c1">// Preview 화면 추가</span>
<span class="kt">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span> <span class="p">[</span><span class="k">unowned</span> <span class="k">self</span><span class="p">]</span> <span class="k">in</span>
    <span class="nf">setCameraPreview</span><span class="p">()</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li>미리보기는 UI 관련 기능이므로 메인 스레드에서 실행되어야 합니다.</li>
</ul>

<p> </p>

<p>다음 뷰 컨트롤러 내에 <code class="language-plaintext highlighter-rouge">setCameraPreview()</code> 함수를 추가합니다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">func</span> <span class="nf">setCameraPreview</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">previewLayer</span> <span class="o">=</span> <span class="kt">AVCaptureVideoPreviewLayer</span><span class="p">(</span><span class="nv">session</span><span class="p">:</span> <span class="n">captureSession</span><span class="p">)</span>
    <span class="n">view</span><span class="o">.</span><span class="n">layer</span><span class="o">.</span><span class="nf">insertSublayer</span><span class="p">(</span><span class="n">previewLayer</span><span class="p">,</span> <span class="nv">above</span><span class="p">:</span> <span class="n">imgViewGuideOverlay</span><span class="o">.</span><span class="n">layer</span><span class="p">)</span>
    <span class="n">previewLayer</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">imgViewGuideOverlay</span><span class="o">.</span><span class="n">frame</span>
    <span class="n">previewLayer</span><span class="o">.</span><span class="n">videoGravity</span> <span class="o">=</span> <span class="o">.</span><span class="n">resizeAspectFill</span>   <span class="c1">// 프레임 크기에 맞춰 리사이즈(비율 깨지지 않음)</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">AVCaptureVideoPreviewLayer를 사용해서 미리보기를 추가할 수 있습니다. UIKit의 레이어에 해당하는 오브젝트입니다.</code></li>
  <li>코드에는 나와있지 않지만 <code class="language-plaintext highlighter-rouge">imgViewGuideOverlay.frame</code>은 정방형(<code class="language-plaintext highlighter-rouge">1 : 1</code> 비율) 크기이며 카메라 미리보기를 이 크기로 지정하려고 합니다.</li>
  <li><code class="language-plaintext highlighter-rouge">videoGravity</code>를 <code class="language-plaintext highlighter-rouge">.resizeAspectFill</code> 로 하면 비율이 깨지지 않으면서 해당하는 크기에 맞춰 확대 또는 축소해서 보여줍니다.
    <ul>
      <li>이 부분을 따로 지정하지 않으면 프레임 사이즈와 관계없이 <code class="language-plaintext highlighter-rouge">3 : 4</code> 포트레이트로 보일 것입니다.</li>
    </ul>
  </li>
</ul>

<p> </p>

<h4 id="9-구성-사항-커밋-및-캡처-세션-실행"><span class="me-2"><strong>9: 구성 사항 커밋 및 캡처 세션 실행</strong></span><a href="#9-구성-사항-커밋-및-캡처-세션-실행" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="c1">// commit configuration: 단일 atomic 업데이트에서 실행 중인 캡처 세션의 구성에 대한 하나 이상의 변경 사항을 커밋합니다.</span>
<span class="n">captureSession</span><span class="o">.</span><span class="nf">commitConfiguration</span><span class="p">()</span>
<span class="c1">// 캡처 세션 실행</span>
<span class="n">captureSession</span><span class="o">.</span><span class="nf">startRunning</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li>구성 사항을 반영한 뒤 캡처 세션을 실행합니다.</li>
</ul>

<p> </p>

<p><strong>반드시 실제 기기에서 실행해야 합니다.</strong></p>

<p>여기까지 진행한 뒤 빌드 및 실행하면 카메라 미리보기가 작동할 것입니다.</p>

<p><a href="https://media.giphy.com/media/BB1NydxehhNcdofc2S/giphy.gif" class="popup img-link shimmer"><img src="https://media.giphy.com/media/BB1NydxehhNcdofc2S/giphy.gif" alt="" loading="lazy"></a></p>

<!-- \[the\_ad id="3020"\] -->

<p> </p>

<h4 id="10-카메라-전후면-전환-버튼-이벤트에-해당-기능-작성"><span class="me-2"><strong>10: 카메라 전/후면 전환 버튼 이벤트에 해당 기능 작성</strong></span><a href="#10-카메라-전후면-전환-버튼-이벤트에-해당-기능-작성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>카메라 전/후면을 변경하는 코드는 다음과 같습니다. 전후 방향을 바꾸는 해당 <code class="language-plaintext highlighter-rouge">UIButton</code>의 이벤트로 지정합니다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="kd">@IBAction</span>  <span class="kd">func</span> <span class="nf">btnActChangeCameraPosition</span><span class="p">(</span><span class="n">_</span> <span class="nv">sender</span><span class="p">:</span> <span class="kt">UIButton</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">captureSession</span><span class="o">.</span><span class="nf">beginConfiguration</span><span class="p">()</span>
    
    <span class="k">switch</span> <span class="n">captureSession</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nv">backCameraInput</span><span class="p">:</span>
        <span class="c1">// 후면에서 전면으로 전환</span>
        <span class="n">captureSession</span><span class="o">.</span><span class="nf">removeInput</span><span class="p">(</span><span class="n">backCameraInput</span><span class="p">)</span>
        <span class="n">captureSession</span><span class="o">.</span><span class="nf">addInput</span><span class="p">(</span><span class="n">frontCameraInput</span><span class="p">)</span>
    <span class="k">case</span> <span class="nv">frontCameraInput</span><span class="p">:</span>
        <span class="c1">// 전면에서 후면으로 전환</span>
        <span class="n">captureSession</span><span class="o">.</span><span class="nf">removeInput</span><span class="p">(</span><span class="n">frontCameraInput</span><span class="p">)</span>
        <span class="n">captureSession</span><span class="o">.</span><span class="nf">addInput</span><span class="p">(</span><span class="n">backCameraInput</span><span class="p">)</span>
    <span class="k">default</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="p">}</span>
    
    <span class="c1">// commitConfiguration : captureSession 의 설정 변경이 완료되었음을 알리는 함수.</span>
    <span class="n">captureSession</span><span class="o">.</span><span class="nf">commitConfiguration</span><span class="p">()</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p> </p>

<h3 id="step-3-카메라-셔터-버튼-이벤트-코드-작성"><span class="me-2"><strong>Step 3: 카메라 셔터 버튼 이벤트 코드 작성</strong></span><a href="#step-3-카메라-셔터-버튼-이벤트-코드-작성" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p><code class="language-plaintext highlighter-rouge">capturePhoto(with:delegate:)</code>를 호출하면 카메라의 셔터 버튼을 누른 것과 같이 해당 이미지가 캡처됩니다. 참고로 기본 카메라에서 기능을 빌려오는 것이기 때문에 기본 카메라에서 무음 상태에서도 셔터음이 울린다면 여기서도 동일하게 울립니다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">@IBAction</span>  <span class="kd">func</span> <span class="nf">btnActShutter</span><span class="p">(</span><span class="n">_</span> <span class="nv">sender</span><span class="p">:</span> <span class="kt">UIButton</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">photoOutput</span><span class="o">.</span><span class="nf">capturePhoto</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">photoSettings</span><span class="p">,</span> <span class="nv">delegate</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>이후 작업은 <code class="language-plaintext highlighter-rouge">delegate</code>에서 실행하게 되며, 이를 위해 뷰 컨트롤러가 <code class="language-plaintext highlighter-rouge">AVCapturePhotoCaptureDelegate</code>를 준수(conform)해야 합니다.</p>

<p>해당 대리자를 준수하는 뷰 컨트롤러의 <code class="language-plaintext highlighter-rouge">extension</code>을 추가합니다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">extension</span> <span class="kt">CameraViewController</span><span class="p">:</span> <span class="kt">AVCapturePhotoCaptureDelegate</span> <span class="p">{</span>
    
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p> </p>

<h3 id="step-4-사진을-라이브러리에-저장-기능-추가"><span class="me-2"><strong>Step 4: 사진을 라이브러리에 저장 기능 추가</strong></span><a href="#step-4-사진을-라이브러리에-저장-기능-추가" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>사진을 찍은 뒤 후처리까지 완료되면 <code class="language-plaintext highlighter-rouge">photoOutput(...didFinishProcessingPhoto...)</code>에 해당 사진이 <code class="language-plaintext highlighter-rouge">photo</code> 변수로 저장되어 있습니다. 이것을 라이브러리에 저장하도록 리퀘스트하면 됩니다.</p>

<p><code class="language-plaintext highlighter-rouge">extension</code> 내부에 다음 메서드를 추가합니다.</p>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="c1">/// capturePhoto 이후에 capture process 가 완료된 이미지를 저장하는 메서드</span>
<span class="kd">func</span> <span class="nf">photoOutput</span><span class="p">(</span><span class="n">_</span> <span class="nv">output</span><span class="p">:</span> <span class="kt">AVCapturePhotoOutput</span><span class="p">,</span> <span class="n">didFinishProcessingPhoto</span> <span class="nv">photo</span><span class="p">:</span> <span class="kt">AVCapturePhoto</span><span class="p">,</span> <span class="nv">error</span><span class="p">:</span> <span class="kt">Error</span><span class="p">?)</span> <span class="p">{</span>
    <span class="k">guard</span> <span class="n">error</span> <span class="o">==</span> <span class="kc">nil</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Error capturing photo:"</span><span class="p">,</span> <span class="n">error</span><span class="o">!.</span><span class="n">localizedDescription</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    
    <span class="c1">// 권한 요청</span>
    <span class="kt">PHPhotoLibrary</span><span class="o">.</span><span class="n">requestAuthorization</span> <span class="p">{</span> <span class="n">status</span> <span class="k">in</span>
        <span class="k">guard</span> <span class="n">status</span> <span class="o">==</span> <span class="o">.</span><span class="n">authorized</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span>
        <span class="p">}</span>
        
        <span class="c1">// 사진 앨범에 저장</span>
        <span class="kt">PHPhotoLibrary</span><span class="o">.</span><span class="nf">shared</span><span class="p">()</span><span class="o">.</span><span class="nf">performChanges</span><span class="p">({</span>
            <span class="k">let</span> <span class="nv">creationRequest</span> <span class="o">=</span> <span class="kt">PHAssetCreationRequest</span><span class="o">.</span><span class="nf">forAsset</span><span class="p">()</span>
            <span class="n">creationRequest</span><span class="o">.</span><span class="nf">addResource</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="o">.</span><span class="n">photo</span><span class="p">,</span> <span class="nv">data</span><span class="p">:</span> <span class="n">photo</span><span class="o">.</span><span class="nf">fileDataRepresentation</span><span class="p">()</span><span class="o">!</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
        <span class="p">},</span> <span class="nv">completionHandler</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<ul>
  <li><strong>권한 요청:</strong> 사진 라이브러리에 접근할 수 있는 권한이 필요합니다.
    <ul>
      <li>여기서는 사진을 저장하는데 사용할 뿐이므로 <em>‘모든 사진 공개’</em> 또는 <em>‘선택된 사진 공개’</em> 둘 중 하나를 선택하더라도 저장이 됩니다.</li>
    </ul>
  </li>
  <li><strong>사진 앨범에 저장</strong>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">PHPhotoLibrary</code> - <code class="language-plaintext highlighter-rouge">import Photos</code>가 필요합니다.</li>
      <li><code class="language-plaintext highlighter-rouge">performChanges(requestHandler, completionHandler)</code>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">requestHandler</code> 부분에 사진 라이브러리에 사진 저장 리퀘스트를 요청합니다.</li>
        </ul>
      </li>
      <li><strong>creationRequest.addResource</strong>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">data</code>에 <code class="language-plaintext highlighter-rouge">photo.fileDataRepresentation()!</code>을 지정하면 <code class="language-plaintext highlighter-rouge">Data</code> 타입의 사진이 지정됩니다.</li>
          <li>기본적으로 <code class="language-plaintext highlighter-rouge">photo.fileDataRepresentation()</code>은 옵셔널 값이나 <code class="language-plaintext highlighter-rouge">data</code>는 비옵셔널 값을 요구하기 때문에 강제 언래핑합니다.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p> </p>

<p>이제 셔터 버튼을 누르면 사진이 찍히며 라이브러리에 저장됩니다.</p>

<p><a href="/assets/img/wp-content/uploads/2023/07/IMG_1212.jpeg" class="popup img-link shimmer"><img src="/assets/img/wp-content/uploads/2023/07/IMG_1212.jpeg" alt="" loading="lazy"></a></p>

<p><a href="/assets/img/wp-content/uploads/2023/07/IMG_1213.jpeg" class="popup img-link shimmer"><img src="/assets/img/wp-content/uploads/2023/07/IMG_1213.jpeg" alt="" loading="lazy"></a></p>

<p> </p>

<h2 id="뷰-컨트롤러-전체-코드"><span class="me-2"><strong>뷰 컨트롤러 전체 코드</strong></span><a href="#뷰-컨트롤러-전체-코드" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<div class="language-swift highlighter-rouge"><div class="code-header">
        <span data-label-text="Swift"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
</pre></td><td class="rouge-code"><pre><span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">AVFoundation</span>
<span class="kd">import</span> <span class="kt">Photos</span>

<span class="kd">class</span> <span class="kt">CameraViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>
    
    <span class="c1">// MARK: - 스토리보드로부터 @IBOutlet으로 연결된 컴포넌트 변수</span>
    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">lblTopic</span><span class="p">:</span> <span class="kt">UILabel</span><span class="o">!</span>
    <span class="kd">@IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nv">imgViewGuideOverlay</span><span class="p">:</span> <span class="kt">UIImageView</span><span class="o">!</span>
    
    <span class="c1">// MARK: - Vars</span>
    <span class="k">var</span> <span class="nv">previewLayer</span><span class="p">:</span> <span class="kt">AVCaptureVideoPreviewLayer</span><span class="o">!</span>
    <span class="k">var</span> <span class="nv">captureSession</span><span class="p">:</span> <span class="kt">AVCaptureSession</span><span class="o">!</span>
    <span class="k">var</span> <span class="nv">backCameraInput</span><span class="p">:</span> <span class="kt">AVCaptureDeviceInput</span><span class="o">!</span>
    <span class="k">var</span> <span class="nv">frontCameraInput</span><span class="p">:</span> <span class="kt">AVCaptureDeviceInput</span><span class="o">!</span>
    
    <span class="k">var</span> <span class="nv">photoSettings</span><span class="p">:</span> <span class="kt">AVCapturePhotoSettings</span> <span class="p">{</span>
        <span class="c1">// NSInvalidArgumentException', reason: '*** -[AVCapturePhotoOutput capturePhotoWithSettings:delegate:]</span>
        <span class="c1">// Settings may not be re-used'</span>
        
        <span class="k">var</span> <span class="nv">settings</span> <span class="o">=</span> <span class="kt">AVCapturePhotoSettings</span><span class="p">()</span>
        <span class="c1">// photoOutput 의 codec의 hevc 가능시 photoSettings의 codec을 hevc로 설정하는 코드입니다.</span>
        <span class="c1">// hevc 불가능한 경우에는 jpeg codec을 사용하도록 합니다.</span>
        <span class="k">if</span> <span class="n">photoOutput</span><span class="o">.</span><span class="n">availablePhotoCodecTypes</span><span class="o">.</span><span class="nf">contains</span><span class="p">(</span><span class="o">.</span><span class="n">hevc</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">settings</span> <span class="o">=</span> <span class="kt">AVCapturePhotoSettings</span><span class="p">(</span><span class="nv">format</span><span class="p">:</span> <span class="p">[</span><span class="kt">AVVideoCodecKey</span><span class="p">:</span> <span class="kt">AVVideoCodecType</span><span class="o">.</span><span class="n">hevc</span><span class="p">])</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">settings</span> <span class="o">=</span> <span class="kt">AVCapturePhotoSettings</span><span class="p">(</span><span class="nv">format</span><span class="p">:</span> <span class="p">[</span><span class="kt">AVVideoCodecKey</span><span class="p">:</span> <span class="kt">AVVideoCodecType</span><span class="o">.</span><span class="n">jpeg</span><span class="p">])</span>
        <span class="p">}</span>
        
        <span class="k">return</span> <span class="n">settings</span>
    <span class="p">}</span>
    <span class="k">var</span> <span class="nv">photoOutput</span><span class="p">:</span> <span class="kt">AVCapturePhotoOutput</span> <span class="o">=</span> <span class="kt">AVCapturePhotoOutput</span><span class="p">()</span>
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidAppear</span><span class="p">(</span><span class="n">_</span> <span class="nv">animated</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidAppear</span><span class="p">(</span><span class="n">animated</span><span class="p">)</span>
        
        <span class="nf">checkCameraPermissions</span><span class="p">()</span>
        <span class="nf">setupPhotoCamera</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="kd">@IBAction</span> <span class="kd">func</span> <span class="nf">btnActShutter</span><span class="p">(</span><span class="n">_</span> <span class="nv">sender</span><span class="p">:</span> <span class="kt">UIButton</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// lblTopic.text = #function</span>
        <span class="n">photoOutput</span><span class="o">.</span><span class="nf">capturePhoto</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">photoSettings</span><span class="p">,</span> <span class="nv">delegate</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="kd">@IBAction</span> <span class="kd">func</span> <span class="nf">btnActChangeCameraPosition</span><span class="p">(</span><span class="n">_</span> <span class="nv">sender</span><span class="p">:</span> <span class="kt">UIButton</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">captureSession</span><span class="o">.</span><span class="nf">beginConfiguration</span><span class="p">()</span>
        
        <span class="k">switch</span> <span class="n">captureSession</span><span class="o">.</span><span class="n">inputs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">{</span>
        <span class="k">case</span> <span class="nv">backCameraInput</span><span class="p">:</span>
            <span class="c1">// 후면에서 전면으로 전환</span>
            <span class="n">captureSession</span><span class="o">.</span><span class="nf">removeInput</span><span class="p">(</span><span class="n">backCameraInput</span><span class="p">)</span>
            <span class="n">captureSession</span><span class="o">.</span><span class="nf">addInput</span><span class="p">(</span><span class="n">frontCameraInput</span><span class="p">)</span>
        <span class="k">case</span> <span class="nv">frontCameraInput</span><span class="p">:</span>
            <span class="c1">// 전면에서 후면으로 전환</span>
            <span class="n">captureSession</span><span class="o">.</span><span class="nf">removeInput</span><span class="p">(</span><span class="n">frontCameraInput</span><span class="p">)</span>
            <span class="n">captureSession</span><span class="o">.</span><span class="nf">addInput</span><span class="p">(</span><span class="n">backCameraInput</span><span class="p">)</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="p">}</span>
        
        <span class="c1">// commitConfiguration : captureSession 의 설정 변경이 완료되었음을 알리는 함수.</span>
        <span class="n">captureSession</span><span class="o">.</span><span class="nf">commitConfiguration</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="c1">// MARK: - Camera Functions</span>
    
    <span class="kd">func</span> <span class="nf">setupPhotoCamera</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// 메인 스레드에서 실행 방지 - startRunning()이 차단 호출(block call)이기 때문</span>
        <span class="kt">DispatchQueue</span><span class="o">.</span><span class="nf">global</span><span class="p">(</span><span class="nv">qos</span><span class="p">:</span> <span class="o">.</span><span class="n">userInitiated</span><span class="p">)</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span> <span class="p">[</span><span class="k">unowned</span> <span class="k">self</span><span class="p">]</span> <span class="k">in</span>
            <span class="c1">// 세션 초기화</span>
            <span class="n">captureSession</span> <span class="o">=</span> <span class="kt">AVCaptureSession</span><span class="p">()</span>
            <span class="c1">// 구성(configuration) 시작</span>
            <span class="n">captureSession</span><span class="o">.</span><span class="nf">beginConfiguration</span><span class="p">()</span>
            
            <span class="c1">// session specific configuration</span>
            <span class="c1">// 세션 프리셋을 설정하기 전에 지원 여부를 확인해야 합니다.</span>
            <span class="k">if</span> <span class="n">captureSession</span><span class="o">.</span><span class="nf">canSetSessionPreset</span><span class="p">(</span><span class="o">.</span><span class="n">photo</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">captureSession</span><span class="o">.</span><span class="n">sessionPreset</span> <span class="o">=</span> <span class="o">.</span><span class="n">photo</span>
            <span class="p">}</span>
            
            <span class="c1">// 사용 가능한 경우 세션이 자동으로 광역 색상을 사용해야 하는지 여부를 지정합니다.</span>
            <span class="n">captureSession</span><span class="o">.</span><span class="n">automaticallyConfiguresCaptureDeviceForWideColor</span> <span class="o">=</span> <span class="kc">true</span>

            <span class="c1">// 후면 카메라 디바이스</span>
            <span class="k">guard</span> <span class="k">let</span> <span class="nv">backCamera</span> <span class="o">=</span> <span class="kt">AVCaptureDevice</span><span class="o">.</span><span class="nf">default</span><span class="p">(</span><span class="o">.</span><span class="n">builtInWideAngleCamera</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="nv">position</span><span class="p">:</span> <span class="o">.</span><span class="n">back</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span>
            <span class="p">}</span>

            <span class="c1">// 전면 카메라 디바이스</span>
            <span class="k">guard</span> <span class="k">let</span> <span class="nv">frontCamera</span> <span class="o">=</span> <span class="kt">AVCaptureDevice</span><span class="o">.</span><span class="nf">default</span><span class="p">(</span><span class="o">.</span><span class="n">builtInWideAngleCamera</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="nv">position</span><span class="p">:</span> <span class="o">.</span><span class="n">front</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span>
            <span class="p">}</span>
            
            <span class="c1">// 생성된 captureSession에 device input을 생성 및 연결하고,</span>
            <span class="c1">// device output을 연결하는 코드입니다.</span>
            <span class="k">do</span> <span class="p">{</span>
                <span class="n">backCameraInput</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">AVCaptureDeviceInput</span><span class="p">(</span><span class="nv">device</span><span class="p">:</span> <span class="n">backCamera</span><span class="p">)</span>
                <span class="n">frontCameraInput</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">AVCaptureDeviceInput</span><span class="p">(</span><span class="nv">device</span><span class="p">:</span> <span class="n">frontCamera</span><span class="p">)</span>
                    
                <span class="c1">// captureSession에 cameraInput을 받도록 설정</span>
                <span class="n">captureSession</span><span class="o">.</span><span class="nf">addInput</span><span class="p">(</span><span class="n">backCameraInput</span><span class="p">)</span>
            <span class="p">}</span> <span class="k">catch</span>  <span class="p">{</span>
                <span class="nf">debugPrint</span><span class="p">(</span><span class="s">"Camera Input Error:"</span><span class="p">,</span> <span class="n">error</span><span class="o">.</span><span class="n">localizedDescription</span><span class="p">)</span>
            <span class="p">}</span>
            
            <span class="c1">// 고해상도의 이미지 캡처 가능 설정</span>
            <span class="c1">// 16.0에서 deprecated됨</span>
            <span class="k">if</span> <span class="k">#unavailable</span><span class="p">(</span><span class="n">iOS</span> <span class="mf">16.0</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">photoOutput</span><span class="o">.</span><span class="n">isHighResolutionCaptureEnabled</span> <span class="o">=</span> <span class="kc">true</span>
            <span class="p">}</span>
            
            <span class="c1">// CaptureSession에 photoOutput을 추가</span>
            <span class="n">captureSession</span><span class="o">.</span><span class="nf">addOutput</span><span class="p">(</span><span class="n">photoOutput</span><span class="p">)</span>
            
            <span class="c1">// Preview 화면 추가</span>
            <span class="kt">DispatchQueue</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="k">async</span> <span class="p">{</span> <span class="p">[</span><span class="k">unowned</span> <span class="k">self</span><span class="p">]</span> <span class="k">in</span>
                <span class="nf">setCameraPreview</span><span class="p">()</span>
            <span class="p">}</span>
            
            <span class="c1">// commit configuration: 단일 atomic 업데이트에서 실행 중인 캡처 세션의 구성에 대한 하나 이상의 변경 사항을 커밋합니다.</span>
            <span class="n">captureSession</span><span class="o">.</span><span class="nf">commitConfiguration</span><span class="p">()</span>
            <span class="c1">// 캡처 세션 실행</span>
            <span class="n">captureSession</span><span class="o">.</span><span class="nf">startRunning</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">setCameraPreview</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">previewLayer</span> <span class="o">=</span> <span class="kt">AVCaptureVideoPreviewLayer</span><span class="p">(</span><span class="nv">session</span><span class="p">:</span> <span class="n">captureSession</span><span class="p">)</span>
        <span class="n">view</span><span class="o">.</span><span class="n">layer</span><span class="o">.</span><span class="nf">insertSublayer</span><span class="p">(</span><span class="n">previewLayer</span><span class="p">,</span> <span class="nv">above</span><span class="p">:</span> <span class="n">imgViewGuideOverlay</span><span class="o">.</span><span class="n">layer</span><span class="p">)</span>
        <span class="n">previewLayer</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">imgViewGuideOverlay</span><span class="o">.</span><span class="n">frame</span>
        <span class="n">previewLayer</span><span class="o">.</span><span class="n">videoGravity</span> <span class="o">=</span> <span class="o">.</span><span class="n">resizeAspectFill</span>   <span class="c1">// 프레임 크기에 맞춰 리사이즈(비율 깨지지 않음)</span>
    <span class="p">}</span>
    
    
    <span class="c1">// MARK: - Permissions</span>
    
    <span class="kd">func</span> <span class="nf">checkCameraPermissions</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">cameraAuthStatus</span> <span class="o">=</span>  <span class="kt">AVCaptureDevice</span><span class="o">.</span><span class="nf">authorizationStatus</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="kt">AVMediaType</span><span class="o">.</span><span class="n">video</span><span class="p">)</span>
        <span class="k">switch</span> <span class="n">cameraAuthStatus</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">authorized</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">denied</span><span class="p">:</span>
            <span class="c1">// TODO: - 카메라 권한 허용 유도하는 기능</span>
            <span class="nf">abort</span><span class="p">()</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">notDetermined</span><span class="p">:</span>
            <span class="kt">AVCaptureDevice</span><span class="o">.</span><span class="nf">requestAccess</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="kt">AVMediaType</span><span class="o">.</span><span class="n">video</span><span class="p">,</span> <span class="nv">completionHandler</span><span class="p">:</span>
                                            <span class="p">{</span> <span class="p">(</span><span class="n">authorized</span><span class="p">)</span> <span class="k">in</span>
                <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">authorized</span><span class="p">){</span>
                    <span class="c1">// TODO: - 카메라 권한 허용 유도하는 기능</span>
                    <span class="nf">abort</span><span class="p">()</span>
                <span class="p">}</span>
            <span class="p">})</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">restricted</span><span class="p">:</span>
            <span class="c1">// 시스템 에러</span>
            <span class="nf">abort</span><span class="p">()</span>
        <span class="kd">@unknown</span> <span class="k">default</span><span class="p">:</span>
            <span class="nf">fatalError</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">CameraViewController</span><span class="p">:</span> <span class="kt">AVCapturePhotoCaptureDelegate</span> <span class="p">{</span>
    <span class="c1">/// capturePhoto 이후에 capture process 가 완료된 이미지를 저장하는 메서드</span>
    <span class="kd">func</span> <span class="nf">photoOutput</span><span class="p">(</span><span class="n">_</span> <span class="nv">output</span><span class="p">:</span> <span class="kt">AVCapturePhotoOutput</span><span class="p">,</span> <span class="n">didFinishProcessingPhoto</span> <span class="nv">photo</span><span class="p">:</span> <span class="kt">AVCapturePhoto</span><span class="p">,</span> <span class="nv">error</span><span class="p">:</span> <span class="kt">Error</span><span class="p">?)</span> <span class="p">{</span>
        <span class="k">guard</span> <span class="n">error</span> <span class="o">==</span> <span class="kc">nil</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"Error capturing photo:"</span><span class="p">,</span> <span class="n">error</span><span class="o">!.</span><span class="n">localizedDescription</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="p">}</span>
        
        <span class="c1">// 권한 요청</span>
        <span class="kt">PHPhotoLibrary</span><span class="o">.</span><span class="n">requestAuthorization</span> <span class="p">{</span> <span class="n">status</span> <span class="k">in</span>
            <span class="k">guard</span> <span class="n">status</span> <span class="o">==</span> <span class="o">.</span><span class="n">authorized</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span>
            <span class="p">}</span>
            
            <span class="c1">// 사진 앨범에 저장</span>
            <span class="kt">PHPhotoLibrary</span><span class="o">.</span><span class="nf">shared</span><span class="p">()</span><span class="o">.</span><span class="nf">performChanges</span><span class="p">({</span>
                <span class="k">let</span> <span class="nv">creationRequest</span> <span class="o">=</span> <span class="kt">PHAssetCreationRequest</span><span class="o">.</span><span class="nf">forAsset</span><span class="p">()</span>
                <span class="n">creationRequest</span><span class="o">.</span><span class="nf">addResource</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="o">.</span><span class="n">photo</span><span class="p">,</span> <span class="nv">data</span><span class="p">:</span> <span class="n">photo</span><span class="o">.</span><span class="nf">fileDataRepresentation</span><span class="p">()</span><span class="o">!</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
            <span class="p">},</span> <span class="nv">completionHandler</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/devlog/">DevLog</a>,
          <a href="/categories/swift/">Swift</a>
      </div>
    

    <!-- tags -->
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=Swift:%20iOS%EC%97%90%EC%84%9C%20%EC%BB%A4%EC%8A%A4%ED%85%80%20%EC%B9%B4%EB%A9%94%EB%9D%BC%20%EB%A7%8C%EB%93%A4%EA%B8%B0%20(2)%20%E2%80%93%20AVCapturePhotoOutput%EC%9C%BC%EB%A1%9C%20%EA%B3%A0%ED%99%94%EC%A7%88%20%EC%82%AC%EC%A7%84%20%EC%B0%8D%EA%B8%B0%20-%20BGSMM&url=https%3A%2F%2Fayaysir.github.io%2Fposts%2Fswift-ios%25EC%2597%2590%25EC%2584%259C-%25EC%25BB%25A4%25EC%258A%25A4%25ED%2585%2580-%25EC%25B9%25B4%25EB%25A9%2594%25EB%259D%25BC-%25EB%25A7%258C%25EB%2593%25A4%25EA%25B8%25B0-1-avcapturephotooutput%25EC%259C%25BC%25EB%25A1%259C-%25EA%25B3%25A0%25ED%2599%2594%25EC%25A7%2588%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://www.facebook.com/sharer/sharer.php?title=Swift:%20iOS%EC%97%90%EC%84%9C%20%EC%BB%A4%EC%8A%A4%ED%85%80%20%EC%B9%B4%EB%A9%94%EB%9D%BC%20%EB%A7%8C%EB%93%A4%EA%B8%B0%20(2)%20%E2%80%93%20AVCapturePhotoOutput%EC%9C%BC%EB%A1%9C%20%EA%B3%A0%ED%99%94%EC%A7%88%20%EC%82%AC%EC%A7%84%20%EC%B0%8D%EA%B8%B0%20-%20BGSMM&u=https%3A%2F%2Fayaysir.github.io%2Fposts%2Fswift-ios%25EC%2597%2590%25EC%2584%259C-%25EC%25BB%25A4%25EC%258A%25A4%25ED%2585%2580-%25EC%25B9%25B4%25EB%25A9%2594%25EB%259D%25BC-%25EB%25A7%258C%25EB%2593%25A4%25EA%25B8%25B0-1-avcapturephotooutput%25EC%259C%25BC%25EB%25A1%259C-%25EA%25B3%25A0%25ED%2599%2594%25EC%25A7%2588%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook">
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=https%3A%2F%2Fayaysir.github.io%2Fposts%2Fswift-ios%25EC%2597%2590%25EC%2584%259C-%25EC%25BB%25A4%25EC%258A%25A4%25ED%2585%2580-%25EC%25B9%25B4%25EB%25A9%2594%25EB%259D%25BC-%25EB%25A7%258C%25EB%2593%25A4%25EA%25B8%25B0-1-avcapturephotooutput%25EC%259C%25BC%25EB%25A1%259C-%25EA%25B3%25A0%25ED%2599%2594%25EC%25A7%2588%2F&text=Swift:%20iOS%EC%97%90%EC%84%9C%20%EC%BB%A4%EC%8A%A4%ED%85%80%20%EC%B9%B4%EB%A9%94%EB%9D%BC%20%EB%A7%8C%EB%93%A4%EA%B8%B0%20(2)%20%E2%80%93%20AVCapturePhotoOutput%EC%9C%BC%EB%A1%9C%20%EA%B3%A0%ED%99%94%EC%A7%88%20%EC%82%AC%EC%A7%84%20%EC%B0%8D%EA%B8%B0%20-%20BGSMM" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/xcode-where-is-infoplist/">Xcode 에서 Info.plist 파일이 없을 때</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/swift-urlscheme/">Swift: iOS에서 Custom URL Scheme 등록해서 url로 앱 열기</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/swift-translation/">SwiftUI: 번역 기능 (Translation) 사용하기 (iOS 18 이상)</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/swift-extensioncontext-error-ios18/">Swift: Action Extension에서 extensionContext가 iOS 18에서 작동하지 않는 문제</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/swift-action-extension/">Swift: Action Extension으로 사진을 내 앱으로 전송하기</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/audiokit/">AudioKit</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9D%8C%ED%96%A5%EC%9D%B4%EB%A1%A0/">음향이론</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/java/">java</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8/">자바스크립트</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/spring-boot/">spring-boot</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/vue-js/">vue-js</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9E%90%EB%B0%94/">자바</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/opengl/">opengl</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/qbasic-%EA%B8%B0%EC%B4%88/">qbasic-기초</a>
      
    </div>
  </section>


            </div>

            
              
              






  <div class="toc-border-cover z-3"></div>
  <section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4">
    <h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->















  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">Further Reading</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/swift-urlscheme/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1761365460"
  data-df="ll"
  
>
  Oct 25, 2025
</time>

              <h4 class="pt-0 my-2">Swift: iOS에서 Custom URL Scheme 등록해서 url로 앱 열기</h4>
              <div class="text-muted">
                <p>iOS에서 Custom URL Scheme를 등록하는 방법입니다.  ## 1. 메인 앱에 URL Scheme 등록  먼저 ImageTranslator 앱의 Info.plist에 다음을 추가하세요.  ```xml CFBundleURLTypes         CFBundleURLSchemes            imagetranslator         ...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/swift-extensioncontext-error-ios18/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1761315060"
  data-df="ll"
  
>
  Oct 24, 2025
</time>

              <h4 class="pt-0 my-2">Swift: Action Extension에서 extensionContext가 iOS 18에서 작동하지 않는 문제</h4>
              <div class="text-muted">
                <p>iOS 18부터 **Action Extension에서 메인 앱을 여는(openURL) 기능이 동작하지 않는 문제** (iOS 17 이하에서는 정상 동작했음) 에 대한 해결방법 요약입니다.  **원문 링크** - [Stack Overflow](https://stackoverflow.com/questions/79077018/unable-to-open-ma...</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/swift-action-extension/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1761307860"
  data-df="ll"
  
>
  Oct 24, 2025
</time>

              <h4 class="pt-0 my-2">Swift: Action Extension으로 사진을 내 앱으로 전송하기</h4>
              <div class="text-muted">
                <p>“Action Extension으로 사진을 내 앱에 넘기는 방법”은 Share Extension과 비슷하지만, Action Extension은 ‘공유’가 아니라 원본 앱의 컨텍스트 안에서 바로 실행되는 확장(App Extension) 입니다. 즉, 사용자가 사진 앱, 파일 앱 등에서 “공유” 메뉴 대신 “작업(Action)” 메뉴에서 내 앱을 실행할 ...</p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/swift-async-await-%ED%82%A4%EC%9B%8C%EB%93%9C%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%8F%99%EA%B8%B0%EC%A0%81-%EC%8B%A4%ED%96%89-%EB%B3%B4%EC%9E%A5-%ED%95%A8%EC%88%98-%EC%9E%91%EC%84%B1/"
      class="btn btn-outline-primary"
      aria-label="Older"
    >
      <p>Swift: async/await 키워드를 이용한 동기적 실행 보장 함수 작성</p>
    </a>
  

  
    <a
      href="/posts/switfui-lazyvgrid%EC%9D%98-griditem-flexible%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%A0-%EB%95%8C-%EA%B0%81-%EC%85%80-%EA%B0%84%EC%9D%98-%EC%97%AC%EB%B0%B1%EC%9D%84-%EC%9D%BC%EC%A0%95%ED%95%98%EA%B2%8C/"
      class="btn btn-outline-primary"
      aria-label="Newer"
    >
      <p>SwitfUI: LazyVGrid의 GridItem...flexible()을 사용할 때 각 셀 간의 여백을 일정하게 지정하는 방법</p>
    </a>
  
</nav>

            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2025</time>

    
      <a href="https://github.com/ayaysir">ayaysir</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="v7.3.1"
        href="https://github.com/cotes2020/jekyll-theme-chirpy"
        target="_blank"
        rel="noopener"
      >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/audiokit/">AudioKit</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9D%8C%ED%96%A5%EC%9D%B4%EB%A1%A0/">음향이론</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/swift/">swift</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/java/">java</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8/">자바스크립트</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/spring-boot/">spring-boot</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/vue-js/">vue-js</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/%EC%9E%90%EB%B0%94/">자바</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/opengl/">opengl</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/qbasic-%EA%B8%B0%EC%B4%88/">qbasic-기초</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- Embedded scripts -->

    
      
      <!-- The comments switcher -->

  
  <!-- https://giscus.app/ -->
<script>
  (function () {
    const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed');
    const initTheme = themeMapper[Theme.visualState];

    let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) {
      lang = lang.slice(0, 2);
    }

    let giscusAttributes = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'ayaysir/ayaysir.github.io',
      'data-repo-id': 'R_kgDOOurl2w',
      'data-category': 'General',
      'data-category-id': 'DIC_kwDOOurl284CxFIa',
      'data-mapping': 'pathname',
      'data-strict' : '0',
      'data-reactions-enabled': '1',
      'data-emit-metadata': '0',
      'data-theme': initTheme,
      'data-input-position': 'bottom',
      'data-lang': lang,
      'data-loading': 'lazy',
      crossorigin: 'anonymous',
      async: ''
    };

    let giscusNode = document.createElement('script');
    Object.entries(giscusAttributes).forEach(([key, value]) =>
      giscusNode.setAttribute(key, value)
    );

    const $footer = document.querySelector('footer');
    $footer.insertAdjacentElement("beforebegin", giscusNode);

    addEventListener('message', (event) => {
      if (event.source === window && event.data && event.data.id === Theme.ID) {
        const newTheme = themeMapper[Theme.visualState];

        const message = {
          setConfig: {
            theme: newTheme
          }
        };

        const giscus =
          document.getElementsByClassName('giscus-frame')[0].contentWindow;
        giscus.postMessage({ giscus: message }, 'https://giscus.app');
      }
    });
  })();
</script>



    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  
  document.addEventListener('DOMContentLoaded', () => {
    SimpleJekyllSearch({
      searchInput: document.getElementById('search-input'),
      resultsContainer: document.getElementById('search-results'),
      json: '/assets/js/data/search.json',
      searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{content}</p>  </article>',
      noResultsText: '<p class="mt-5">Oops! No results found.</p>',
      templateMiddleware: function(prop, value, template) {
        if (prop === 'categories') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
          }
        }

        if (prop === 'tags') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
          }
        }
      }
    });
  });
</script>

  </body>
</html>

